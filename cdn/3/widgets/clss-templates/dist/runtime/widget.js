/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-ui","jimu-core/react","jimu-arcgis"],(function(e,t){var n={},r={},a={},o={};return{setters:[function(e){n.React=e.React,n.ReactRedux=e.ReactRedux,n.classNames=e.classNames,n.getAppStore=e.getAppStore},function(e){r.Button=e.Button,r.Checkbox=e.Checkbox,r.Dropdown=e.Dropdown,r.DropdownButton=e.DropdownButton,r.DropdownMenu=e.DropdownMenu,r.Label=e.Label,r.Loading=e.Loading,r.Modal=e.Modal,r.ModalBody=e.ModalBody,r.ModalFooter=e.ModalFooter,r.ModalHeader=e.ModalHeader,r.TextArea=e.TextArea,r.TextInput=e.TextInput},function(e){a.default=e.default},function(e){o.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules}],execute:function(){e((()=>{var e={9179:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.333 0h4c.737 0 1.334.597 1.334 1.333v1.334h8C15.403 2.667 16 3.264 16 4v10.667c0 .736-.597 1.333-1.333 1.333H1.333A1.333 1.333 0 0 1 0 14.667V1.333C0 .597.597 0 1.333 0Zm0 7.333v7.334h13.334V7.333H1.334Zm0-1.333h13.334V4H5.334V1.335h-4V6Z" fill="#000"></path></svg>'},1553:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35.151.722.257 1.34.316 1.852.374.16.725.362 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 21.98 21.98 0 0 1-1.49 1.194 5.17 5.17 0 0 1-.007 1.183l1.464 1.119a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 22.445 22.445 0 0 1-1.807-.66c-.325.233-.679.43-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21.019 21.019 0 0 1-.317-1.853 5.34 5.34 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546c.567-.49 1.063-.888 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196c.719.233 1.321.453 1.807.66.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994h2.839Zm-.365 1H6.985l-.28 1.866-.467.19c-.235.095-.46.21-.672.34l-.207.136-.42.293-.476-.197c-.328-.137-.718-.281-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4.127 4.127 0 0 0-.021.816l.014.144.058.492-.419.294c-.288.203-.615.451-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29c.204.146.42.274.645.384l.228.103.474.199.059.49c.04.338.103.731.19 1.177l.043.219h2.088l.282-1.867.466-.19c.236-.095.46-.21.672-.34l.207-.136.419-.293.476.198c.33.136.72.28 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4.131 4.131 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18.1 18.1 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.496 4.496 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49c-.032-.27-.08-.576-.14-.916l-.094-.48Zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" fill="#000"></path></svg>'},272:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0Zm1 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM7.5 4.5a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3Z" fill="#000"></path></svg>'},4357:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0v-6ZM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1Zm0 3V1H5v2h6Zm1.895 1h-9.79l.8 11h8.19l.8-11Z" fill="#000"></path></svg>'},342:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m7 11.5 5.354-5.354-.708-.707L7 10.086 4.354 7.439l-.708.707L7 11.5Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8Zm15 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" fill="#000"></path></svg>'},6691:(e,t,n)=>{"use strict";var r;n.d(t,{CLSSActionKeys:()=>r}),function(e){e.AUTHENTICATE_ACTION="[CLSS-APPLICATION] authenicate credentials",e.LOAD_HAZARDS_ACTION="[CLSS-APPLICATION] load hazards",e.LOAD_HAZARD_TYPES_ACTION="[CLSS-APPLICATION] load hazard types",e.LOAD_ORGANIZATIONS_ACTION="[CLSS-APPLICATION] load organizations",e.LOAD_ORGANIZATION_TYPES_ACTION="[CLSS-APPLICATION] load organization types",e.LOAD_TEMPLATES_ACTION="[CLSS-APPLICATION] load templates",e.LOAD_PRIORITIES_ACTION="[CLSS-APPLICATION] load priorities",e.SELECT_TEMPLATE_ACTION="[CLSS-APPLICATION] select template",e.SEARCH_ACTION="[CLSS-APPLICATION] search for template",e.SIGN_IN_ACTION="[CLSS-APPLICATION] Sign in",e.SIGN_OUT_ACTION="[CLSS-APPLICATION] Sign out",e.SET_USER_ACTION="[CLSS-APPLICATION] Set CLSS User",e.SET_IDENTITY_ACTION="[CLSS-APPLICATION] Set Identity",e.SET_ERRORS="[CLSS-APPLICATION] Set global errors",e.TOGGLE_INDICATOR_EDITING="[CLSS-APPLICATION] Toggle indicator editing",e.SELECT_LIFELINESTATUS_ACTION="[CLSS-APPLICATION] Select a lifeline status",e.LOAD_ASSESSMENTS_ACTION="[CLSS-APPLICATION] Load assessments",e.SELECT_ASSESSMENT_ACTION="[CLSS-APPLICATION] Select assessment",e.LOAD_RATINGSCALES_ACTION="[CLSS-APPLICATION] Load rating scales",e.LOAD_SCALEFACTORS_ACTION="[CLSS-APPLICATION] Load constants"}(r||(r={}))},6826:e=>{"use strict";e.exports=o},8891:e=>{"use strict";e.exports=n},1315:e=>{"use strict";e.exports=a},726:e=>{"use strict";e.exports=r}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var s={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(s),i.d(s,{default:()=>_e});var e=i(8891),t=i(726),n=i(1315);const r=({title:e,onChange:r,defaultValue:a,props:o})=>n.default.createElement("h4",{style:{width:"100%"}},e,":",n.default.createElement(t.TextInput,Object.assign({style:{fontSize:o.theme.typography.sizes.display4},"data-testid":"templateSearchInput",placeholder:"Search...",size:"lg",allowClear:!0,type:"text",value:a,onChange:e=>r(e.target.value)},o)));var a=i(1553),o=i.n(a);const l=t=>{const n=window.SVG,{className:r}=t,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",r);return n?e.React.createElement(n,Object.assign({className:i,src:o()},a)):e.React.createElement("svg",Object.assign({className:i},a))};var c=i(342),d=i.n(c);const u=t=>{const n=window.SVG,{className:r}=t,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",r);return n?e.React.createElement(n,Object.assign({className:o,src:d()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var p=i(9179),f=i.n(p);const m=t=>{const n=window.SVG,{className:r}=t,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",r);return n?e.React.createElement(n,Object.assign({className:o,src:f()},a)):e.React.createElement("svg",Object.assign({className:o},a))},h=({template:e,onClick:r,onDblClick:a,props:o})=>{var i;return n.default.createElement("div",{"data-testid":"templateButton",className:"button-wrapper",onDoubleClick:()=>{},onClick:()=>r(e.objectId),style:{backgroundColor:e.isSelected?o.config.selectedButtonBackgroundColor:o.config.defaultButtonBackgroundColor}},n.default.createElement("style",null,"\n                    .button-wrapper{\n                        display: flex;\n                        border-radius: 10px;\n                        width: 100%;\n                        align-items: center;\n                        font-size: 15px;\n                        padding: 10px;\n                        cursor: pointer;\n                        justify-content: space-between;\n                        margin: 5px 0;\n                    }\n                    .button-wrapper:hover{\n                        opacity: 0.5;\n                    }\n                    .button-content{\n                        display: flex;\n                        justify-content:space-between;\n                        align-items: center;\n                    }\n                    .button-label{\n                        cursor: pointer;                        \n                        width: 180px;\n                        white-space: nowrap;\n                        overflow: hidden;\n                        text-overflow: ellipsis;\n                        margin-bottom: 0 !important;\n                    }\n                    .pre-icon{\n                        margin-right: 10px;\n                    }\n                "),n.default.createElement("div",{className:"button-content"},1===(null===(i=null==e?void 0:e.status)||void 0===i?void 0:i.code)?n.default.createElement(l,{className:"pre-icon",size:20,color:e.isSelected?o.config.selectedButtonColor:"gray"}):n.default.createElement(m,{className:"pre-icon",size:15,color:e.isSelected?o.config.selectedButtonColor:"gray"}),n.default.createElement(t.Label,{style:{color:e.isSelected?o.config.selectedButtonColor:o.config.defaultTemplateButtonColor},className:"button-label"},e.name)),e.isSelected?n.default.createElement(u,{className:"post-icon",size:20,color:o.config.selectedButtonColor}):null)},g=({message:e})=>n.default.createElement("div",{style:{height:"100%",width:"100%",position:"absolute",background:"rgb(0 0 0 / 13%)",top:0,left:0,zIndex:999999,display:"flex",justifyContent:"center",alignItems:"center"}},n.default.createElement(t.Loading,{className:"",type:"SECONDARY"}),n.default.createElement("h3",null,e));var v=i(6691);const y="Template FeatureLayer URL not provided",w="Organization FeatureLayer URL not provided";var b;!function(e){e.HEADER="header",e.INDICATOR_NAME="Indicator Name",e.PRIORITIES="Indicator Priorities",e.NEW_INDICATOR="Create New Indicator",e.DELETE_INDICATOR="Delete Indicator"}(b||(b={}));const E="https://www.arcgis.com",S={id:"000",name:"-None-",title:"-None-"};var O=function(){return O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},O.apply(this,arguments)};function T(e){return"string"!=typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}function I(e){return Object.keys(e).some((function(t){var n=e[t];if(!n)return!1;switch(n&&n.toParam&&(n=n.toParam()),n.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function N(e){var t={};return Object.keys(e).forEach((function(n){var r,a,o=e[n];if(o&&o.toParam&&(o=o.toParam()),o||0===o||"boolean"==typeof o||"string"==typeof o){var i;switch(o.constructor.name){case"Array":var s=null===(a=null===(r=o[0])||void 0===r?void 0:r.constructor)||void 0===a?void 0:a.name;i="Array"===s?o:"Object"===s?JSON.stringify(o):o.join(",");break;case"Object":i=JSON.stringify(o);break;case"Date":i=o.valueOf();break;case"Function":i=null;break;case"Boolean":i=o+"";break;default:i=o}(i||0===i||"string"==typeof i||Array.isArray(i))&&(t[n]=i)}})),t}function k(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((function(t){return k(e,t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function A(e){var t=N(e);return Object.keys(t).map((function(e){return k(e,t[e])})).join("&")}var R=function(e,t){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},R(e,t)},x=function(){return x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},x.apply(this,arguments)},C=function(e,t,n,r,a){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=n,this.url=r,this.options=a};(C.prototype=Object.create(Error.prototype)).constructor=C;var _="@esri/arcgis-rest-js",L={httpMethod:"POST",params:{f:"json"}},D=function(e){function t(t,n,r,a,o){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===n&&(n="AUTHENTICATION_ERROR_CODE");var i=e.call(this,t,n,r,a,o)||this;return i.name="ArcGISAuthError",i.message="AUTHENTICATION_ERROR_CODE"===n?t:n+": "+t,i}return function(e,t){function n(){this.constructor=e}R(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.retry=function(e,t){var n=this;void 0===t&&(t=3);var r=0,a=function(o,i){e(n.url,n.options).then((function(e){var t=x(x({},n.options),{authentication:e});return r+=1,z(n.url,t)})).then((function(e){o(e)})).catch((function(e){"ArcGISAuthError"===e.name&&r<t?a(o,i):"ArcGISAuthError"===e.name&&r>=t?i(n):i(e)}))};return new Promise((function(e,t){a(e,t)}))},t}(C);function z(e,t){void 0===t&&(t={params:{f:"json"}});var n=x(x(x({httpMethod:"POST"},L),t),{params:x(x({},L.params),t.params),headers:x(x({},L.headers),t.headers)}),r=[],a=[];if(n.fetch||"undefined"==typeof fetch?(r.push("`fetch`"),a.push("`node-fetch`")):n.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(r.push("`Promise`"),a.push("`es6-promise`")),"undefined"==typeof FormData&&(r.push("`FormData`"),a.push("`isomorphic-form-data`")),!n.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+r.join(", ")+". We recommend installing the "+a.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var o=n.httpMethod,i=n.authentication,s=n.rawResponse,l=x({f:"json"},n.params),c=null,d={method:o,credentials:n.credentials||"same-origin"};return n.headers&&n.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(d.credentials="include"),(i?i.getToken(e,{fetch:n.fetch}).catch((function(t){return t.url=e,t.options=n,c=t,Promise.resolve("")})):Promise.resolve("")).then((function(t){t.length&&(l.token=t),i&&i.getDomainCredentials&&(d.credentials=i.getDomainCredentials(e));var r={};if("GET"===d.method){l.token&&n.hideToken&&"undefined"==typeof window&&(r["X-Esri-Authorization"]="Bearer "+l.token,delete l.token);var a=""===A(l)?e:e+"?"+A(l);n.maxUrlLength&&a.length>n.maxUrlLength||l.token&&n.hideToken?(d.method="POST",t.length&&n.hideToken&&(l.token=t,delete r["X-Esri-Authorization"])):e=a}var o=new RegExp("/items/.+/updateResources").test(e);return"POST"===d.method&&(d.body=function(e,t){var n=I(e)||t,r=N(e);if(n){var a=new FormData;return Object.keys(r).forEach((function(e){if("undefined"!=typeof Blob&&r[e]instanceof Blob){var t=r.fileName||r[e].name||e;a.append(e,r[e],t)}else a.append(e,r[e])})),a}return A(e)}(l,o)),d.headers=x(x({},r),n.headers),"undefined"!=typeof window||d.headers.referer||(d.headers.referer=_),I(l)||o||(d.headers["Content-Type"]="application/x-www-form-urlencoded"),n.fetch(e,d)})).then((function(t){if(!t.ok){var r=t.status,a=t.statusText;throw new C(a,"HTTP "+r,t,e,n)}if(s)return t;switch(l.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((function(t){if("json"!==l.f&&"geojson"!==l.f||s)return t;var r=function(e,t,n,r,a){if(e.code>=400){var o=e.message,i=e.code;throw new C(o,i,e,t,r)}if(e.error){var s=e.error,l=(o=s.message,i=s.code,s.messageCode),c=l||i||"UNKNOWN_ERROR_CODE";if(498===i||499===i||"GWM_0003"===l||400===i&&"Unable to generate token."===o)throw a||new D(o,c,e,t,r);throw new C(o,c,e,t,r)}if("failed"===e.status||"failure"===e.status){o=void 0,i="UNKNOWN_ERROR_CODE";try{o=JSON.parse(e.statusMessage).message,i=JSON.parse(e.statusMessage).code}catch(t){o=e.statusMessage||e.message}throw new C(o,i,e,t,r)}return e}(t,e,0,n,c);if(c){var a=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];n.authentication.federatedServers[a]={token:[],expires:new Date(Date.now()+864e5)},c=null}return r}))}function j(e,t){var n=t;return"undefined"!=typeof window&&window.location&&window.location.host?n.params.referer=window.location.host:n.params.referer=_,z(e,n)}function P(e,t){var n=t;return n.rawResponse=!1,z(e,n).then((function(e){var t={token:e.access_token,username:e.username,expires:new Date(Date.now()+(1e3*e.expires_in-1e3)),ssl:!0===e.ssl};return e.refresh_token&&(t.refreshToken=e.refresh_token),t}))}var M=/^https?:\/\/(\S+)\.arcgis\.com.+/;function H(e){return M.test(e)}function U(e){if(!M.test(e))return null;var t=e.match(M)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}var B,F,G=function(){function e(e){if(this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.username=e.username,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?T(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.refreshTokenTTL=e.refreshTokenTTL||20160,this.server=e.server,this.federatedServers={},this.trustedDomains=[],e.server){var t=this.getServerRootUrl(e.server);this.federatedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trustedServers",{get:function(){return console.log("DEPRECATED: use federatedServers instead"),this.federatedServers},enumerable:!1,configurable:!0}),e.beginOAuth2=function(t,n){void 0===n&&(n=window),t.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var r,a=O({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",expiration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:t.clientId,locale:""},t),o=a.portal,i=a.provider,s=a.clientId,l=a.expiration,c=a.redirectUri,d=a.popup,u=a.popupWindowFeatures,p=a.state,f=a.locale,m=a.params;if(r="arcgis"===i?o+"/oauth2/authorize?client_id="+s+"&response_type=token&expiration="+(t.duration||l)+"&redirect_uri="+encodeURIComponent(c)+"&state="+p+"&locale="+f:o+"/oauth2/social/authorize?client_id="+s+"&socialLoginProviderName="+i+"&autoAccountCreateForSocial=true&response_type=token&expiration="+(t.duration||l)+"&redirect_uri="+encodeURIComponent(c)+"&state="+p+"&locale="+f,m&&(r=r+"&"+A(m)),d){var h,g=((h={promise:null,resolve:null,reject:null}).promise=new Promise((function(e,t){h.resolve=e,h.reject=t})),h);return n["__ESRI_REST_AUTH_HANDLER_"+s]=function(t,n){if(t){var r=JSON.parse(t);g.reject(new D(r.errorMessage,r.error))}else if(n){var a=JSON.parse(n);g.resolve(new e({clientId:s,portal:o,ssl:a.ssl,token:a.token,tokenExpires:new Date(a.expires),username:a.username}))}},n.open(r,"oauth-window",u),g.promise}n.location.href=r},e.completeOAuth2=function(t,n){void 0===n&&(n=window);var r=O({portal:"https://www.arcgis.com/sharing/rest",popup:!0},t),a=r.portal,o=r.clientId,i=r.popup;function s(t,r){try{var s=void 0,l="__ESRI_REST_AUTH_HANDLER_"+o;if(i&&(n.opener?n.opener.parent&&n.opener.parent[l]?s=n.opener.parent[l]:n.opener&&n.opener[l]&&(s=n.opener[l]):n!==n.parent&&n.parent&&n.parent[l]&&(s=n.parent[l]),s))return s(t?JSON.stringify(t):void 0,JSON.stringify(r)),void n.close()}catch(e){throw new D('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(t)throw new D(t.errorMessage,t.error);return new e({clientId:o,portal:a,ssl:r.ssl,token:r.token,tokenExpires:r.expires,username:r.username})}var l=n.location.hash.replace(/^#/,"").split("&").reduce((function(e,t){var n=function(e){var t=e.split("="),n=t[0],r=t[1];return{key:decodeURIComponent(n),value:decodeURIComponent(r)}}(t),r=n.key,a=n.value;return e[r]=a,e}),{});if(!l.access_token){var c=void 0,d="Unknown error";return l.error&&(c=l.error,d=l.error_description),s({error:c,errorMessage:d})}var u=l.access_token,p=new Date(Date.now()+1e3*parseInt(l.expires_in,10)-6e4),f=l.username;return s(void 0,{token:u,expires:p,ssl:"true"===l.ssl,username:f})},e.fromParent=function(t,n){var r;return!n&&window&&(n=window),new Promise((function(a,o){r=function(t){if(t.source===n.parent&&t.data)try{return a(e.parentMessageHandler(t))}catch(e){return o(e)}},n.addEventListener("message",r,!1),n.parent.postMessage({type:"arcgis:auth:requestCredential"},t)})).then((function(e){return n.removeEventListener("message",r,!1),e}))},e.authorize=function(e,t){e.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var n=O({portal:"https://arcgis.com/sharing/rest",expiration:20160},e),r=n.portal,a=n.clientId,o=n.expiration,i=n.redirectUri;t.writeHead(301,{Location:r+"/oauth2/authorize?client_id="+a+"&expiration="+(e.duration||o)+"&response_type=code&redirect_uri="+encodeURIComponent(i)}),t.end()},e.exchangeAuthorizationCode=function(t,n){var r=O({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:20160},t),a=r.portal,o=r.clientId,i=r.redirectUri,s=r.refreshTokenTTL;return P(a+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:o,redirect_uri:i,code:n}}).then((function(t){return new e({clientId:o,portal:a,ssl:t.ssl,redirectUri:i,refreshToken:t.refreshToken,refreshTokenTTL:s,refreshTokenExpires:new Date(Date.now()+60*(s-1)*1e3),token:t.token,tokenExpires:t.expires,username:t.username})}))},e.deserialize=function(t){var n=JSON.parse(t);return new e({clientId:n.clientId,refreshToken:n.refreshToken,refreshTokenExpires:new Date(n.refreshTokenExpires),username:n.username,password:n.password,token:n.token,tokenExpires:new Date(n.tokenExpires),portal:n.portal,ssl:n.ssl,tokenDuration:n.tokenDuration,redirectUri:n.redirectUri,refreshTokenTTL:n.refreshTokenTTL})},e.fromCredential=function(t){var n=void 0===t.ssl||t.ssl,r=t.expires||Date.now()+72e5;return new e({portal:t.server.includes("sharing/rest")?t.server:t.server+"/sharing/rest",ssl:n,token:t.token,username:t.userId,tokenExpires:new Date(r)})},e.parentMessageHandler=function(t){if("arcgis:auth:credential"===t.data.type)return e.fromCredential(t.data.credential);if("arcgis:auth:error"===t.data.type){var n=new Error(t.data.error.message);throw n.name=t.data.error.name,n}throw new Error("Unknown message type.")},e.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}},e.prototype.getUser=function(e){var t=this;if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);var n=this.portal+"/community/self",r=O(O({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=z(n,r).then((function(e){return t._user=e,t._pendingUserRequest=null,e})),this._pendingUserRequest},e.prototype.getPortal=function(e){var t=this;if(this._pendingPortalRequest)return this._pendingPortalRequest;if(this._portalInfo)return Promise.resolve(this._portalInfo);var n=this.portal+"/portals/self",r=O(O({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingPortalRequest=z(n,r).then((function(e){return t._portalInfo=e,t._pendingPortalRequest=null,e})),this._pendingPortalRequest},e.prototype.getUsername=function(){return this.username?Promise.resolve(this.username):this._user?Promise.resolve(this._user.username):this.getUser().then((function(e){return e.username}))},e.prototype.getToken=function(e,t){return r=e,a=H(n=this.portal),o=H(r),i=U(n),s=U(r),a&&o&&i===s||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t);var n,r,a,o,i,s},e.prototype.validateAppAccess=function(e){return this.getToken(this.portal).then((function(t){return function(e,t,n){return void 0===n&&(n="https://www.arcgis.com/sharing/rest"),z(n+"/oauth2/validateAppAccess",{method:"POST",params:{f:"json",client_id:t,token:e}})}(t,e)}))},e.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}},e.prototype.serialize=function(){return JSON.stringify(this)},e.prototype.enablePostMessageAuth=function(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)},e.prototype.disablePostMessageAuth=function(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)},e.prototype.refreshSession=function(e){return this._user=null,this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new D("Unable to refresh token."))},e.prototype.getServerRootUrl=function(e){var t=T(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0].match(/(https?:\/\/)(.+)/),n=(t[0],t[1]),r=t[2].split("/"),a=r[0],o=r.slice(1);return""+n+a.toLowerCase()+"/"+o.join("/")},e.prototype.getDomainCredentials=function(e){return this.trustedDomains&&this.trustedDomains.length&&this.trustedDomains.some((function(t){return e.startsWith(t)}))?"include":"same-origin"},e.prototype.createPostMessageHandler=function(e){var t=this;return function(n){var r=e.indexOf(n.origin)>-1,a="arcgis:auth:requestCredential"===n.data.type,o=t.tokenExpires.getTime()>Date.now();if(r&&a){var i={};if(o){var s=t.toCredential();s.server=s.server.replace("/sharing/rest",""),i={type:"arcgis:auth:credential",credential:s}}else i={type:"arcgis:auth:error",error:{name:"tokenExpiredError",message:"Session token was expired, and not returned to the child application"}};n.source.postMessage(i,n.origin)}}},e.prototype.getTokenForServer=function(e,t){var n=this,r=this.getServerRootUrl(e),a=this.federatedServers[r];return a&&a.expires&&a.expires.getTime()>Date.now()?Promise.resolve(a.token):(this._pendingTokenRequests[r]||(this._pendingTokenRequests[r]=this.fetchAuthorizedDomains().then((function(){return z(r+"/rest/info",{credentials:n.getDomainCredentials(e)}).then((function(a){if(a.owningSystemUrl){if(o=a.owningSystemUrl,i=n.portal,s=T(function(e){if(!M.test(e))return e;switch(U(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(i)).replace(/https?:\/\//,""),l=T(o).replace(/https?:\/\//,""),new RegExp(l,"i").test(s))return z(a.owningSystemUrl+"/sharing/rest/info",t);throw new D(e+" is not federated with "+n.portal+".","NOT_FEDERATED")}var o,i,s,l;if(a.authInfo&&void 0!==n.federatedServers[r])return Promise.resolve({authInfo:a.authInfo});throw new D(e+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")})).then((function(e){return e.authInfo.tokenServicesUrl})).then((function(t){return n.token&&n.tokenExpires.getTime()>Date.now()?j(t,{params:{token:n.token,serverUrl:e,expiration:n.tokenDuration,client:"referer"}}):j(t,{params:{username:n.username,password:n.password,expiration:n.tokenDuration,client:"referer"}}).then((function(e){return n._token=e.token,n._tokenExpires=new Date(e.expires),e}))})).then((function(e){return n.federatedServers[r]={expires:new Date(e.expires),token:e.token},delete n._pendingTokenRequests[r],e.token}))}))),this._pendingTokenRequests[r])},e.prototype.getFreshToken=function(e){var t=this;return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshSession(e).then((function(e){return t._pendingTokenRequests[t.portal]=null,e.token}))),this._pendingTokenRequests[this.portal])},e.prototype.refreshWithUsernameAndPassword=function(e){var t=this,n=O({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},e);return j(this.portal+"/generateToken",n).then((function(e){return t._token=e.token,t._tokenExpires=new Date(e.expires),t}))},e.prototype.refreshWithRefreshToken=function(e){var t=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now())return this.refreshRefreshToken(e);var n=O({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return P(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t}))},e.prototype.refreshRefreshToken=function(e){var t=this,n=O({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return P(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t._refreshToken=e.refreshToken,t._refreshTokenExpires=new Date(Date.now()+60*(t.refreshTokenTTL-1)*1e3),t}))},e.prototype.fetchAuthorizedDomains=function(){var e=this;return this.server||!this.portal?Promise.resolve(this):this.getPortal().then((function(t){return t.authorizedCrossOriginDomains&&t.authorizedCrossOriginDomains.length&&(e.trustedDomains=t.authorizedCrossOriginDomains.filter((function(e){return!e.startsWith("http://")})).map((function(e){return e.startsWith("https://")?e:"https://"+e}))),e}))},e}(),q=function(){return q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},q.apply(this,arguments)};function W(e,t,n){var r=x(x({params:{}},n),e);return r.params=t.reduce((function(t,n){return(e[n]||"boolean"==typeof e[n])&&(t[n]=e[n]),t}),r.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(e,t){return r[t]&&(e[t]=r[t]),e}),{})}function V(e){var t=W(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:q({where:"1=1",outFields:"*"},e.params)});return z(T(e.url)+"/query",t)}function Z(e,t,n){switch(t||(t=B.INFO),n&&(n=`(${n})`),e=`[${(new Date).toLocaleString()}]: ${e} ${n}`,t){case B.INFO:console.log(e);break;case B.WRN:console.warn(e);break;case B.ERROR:console.error(e);break;default:console.log(e)}}(F=B||(B={})).INFO="Information",F.WRN="Warning",F.ERROR="Error";var K=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))};function J(e){return K(this,void 0,void 0,(function*(){return G.fromCredential(e.credential)}))}function $(e,t,n){return K(this,void 0,void 0,(function*(){try{const r=yield J(n);return V({url:e,where:t,authentication:r,hideToken:!0}).then((e=>e))}catch(e){Z(e,B.ERROR,"queryTableFeatureSet")}}))}function Y(e,t,n){return K(this,void 0,void 0,(function*(){const r=yield J(n);try{return(yield V({url:e,where:t,authentication:r,httpMethod:"POST",hideToken:!0})).features}catch(n){Z(n,B.ERROR,"queryTableFeatures"),Z(e,B.WRN,t)}}))}function X(e,t,n){return K(this,void 0,void 0,(function*(){const r=yield J(n);try{return z(T((a={url:e,features:t,authentication:r,rollbackOnFailure:!0}).url)+"/addFeatures",W(a,["features","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:q({},a.params)}))}catch(e){console.log(e)}var a}))}function Q(e,t,n){return K(this,void 0,void 0,(function*(){const r=yield J(n);return z(T((a={url:e,objectIds:t,authentication:r,rollbackOnFailure:!0}).url)+"/deleteFeatures",W(a,["where","objectIds","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:q({},a.params)}));var a}))}var ee=i(6826),te=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))};const ne=(e,t)=>te(void 0,void 0,void 0,(function*(){try{return yield ae(e,t)}catch(n){return console.log(n),yield function(e,t){return te(this,void 0,void 0,(function*(){const n=yield re(e,t);return yield n.getCredential(`${t}/sharing`,{error:null,oAuthPopupConfirmation:!1,token:null})}))}(e,t)}}));function re(e,t){return te(this,void 0,void 0,(function*(){let n=window.IdentityManager;if(!n){const r=yield(0,ee.loadArcGISJSAPIModules)(["esri/identity/IdentityManager","esri/identity/OAuthInfo"]);window.IdentityManager=r[0],window.OAuthInfo=r[1],n=r[0];const a=new(0,r[1])({appId:e,portalUrl:t,popup:!1});n.registerOAuthInfos([a])}return n}))}const ae=(e,t)=>te(void 0,void 0,void 0,(function*(){return(yield re(e,t)).checkSignInStatus(`${t}/sharing`)})),oe=(e,t,n)=>e.sort(((e,r)=>e[t]>r[t]?n?-1:1:e[t]<r[t]?n?1:-1:0)),ie=e=>{if(e)return new Date(e).toLocaleString()};String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},Array.prototype.orderBy=function(e,t){return this.sort(((n,r)=>n[e]>r[e]?t?-1:1:n[e]<r[e]?t?1:-1:0))},Array.prototype.groupBy=function(e){return this.reduce((function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t}),{})};var se=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))};function le(e,t){return se(this,void 0,void 0,(function*(){return console.log("get Lifeline called"),yield Y(t.lifelines,e,t)}))}function ce(e,t){return se(this,void 0,void 0,(function*(){return console.log("get Components called"),yield Y(t.components,e,t)}))}function de(e,t){return se(this,void 0,void 0,(function*(){return console.log("get Template called"),yield $(t.templates,e,t)}))}function ue(t,n){(0,e.getAppStore)().dispatch({type:t,val:n})}function pe(e,t){return se(this,void 0,void 0,(function*(){if(!e||null==e||""===e||null==e)throw new Error(t)}))}var fe=i(4357),me=i.n(fe);const he=t=>{const n=window.SVG,{className:r}=t,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",r);return n?e.React.createElement(n,Object.assign({className:o,src:me()},a)):e.React.createElement("svg",Object.assign({className:o},a))},ge=({items:e,item:r,deletable:a,setItem:o,deleteItem:i,menuWidth:s})=>{const l=n.default.useRef();return n.default.useEffect((()=>{e&&e.length>0&&o(r||e[0])}),[e]),n.default.createElement("div",{className:"clss-dropdown-container",style:{width:"100%"}},n.default.createElement("style",null,"\n                  .dropdown-item-container{\n                    height: 45px;\n                    border-bottom: 1px solid rgb(227, 227, 227);\n                    width: 100%;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                  }\n                  .dropdown-item-container:hover{\n                    background-color: rgb(227, 227, 227);\n                  }\n                  .jimu-dropdown-menu{\n                    width: 35%;\n                    max-height: 500px;\n                    overflow: auto;\n                  }\n                  .jimu-dropdown-menu .dropdown-item-container:last-child{\n                    border-bottom: none;\n                  }\n                  .modal-content .clss-dropdown-container button{\n                    width: 100%;\n                  }\n                  .clss-dropdown-container .jimu-dropdown{\n                    width: 100%;\n                  }\n                  .close-button{\n                    margin: 10px;\n                    color: gray;\n                  }\n\n                  .modal-content .clss-dropdown-container button span{\n                     line-height: 30px !important;\n                  }\n                 \n                  .dropdown-item-container label{\n                    width: 100%;\n                    height: 100%;\n                    display: flex;\n                    align-items: center;\n                    font-size: 1.2em;\n                    margin-left: 1em;\n                    cursor: pointer;\n                  }\n                 "),n.default.createElement(t.Dropdown,{activeIcon:"true",size:"lg"},n.default.createElement(t.DropdownButton,{className:"dropdownButton",ref:l,size:"lg",style:{textAlign:"left"}},(null==r?void 0:r.title)||(null==r?void 0:r.name)),n.default.createElement(t.DropdownMenu,{style:{width:s||"30%"}},null==e?void 0:e.map(((e,r)=>n.default.createElement("div",{id:(null==e?void 0:e.name)||(null==e?void 0:e.title),className:"dropdown-item-container"},n.default.createElement(t.Label,{check:!0,onClick:()=>(e=>{o(e),l&&l.current&&l.current.click()})(e)},(null==e?void 0:e.title)||(null==e?void 0:e.name)),"-None-"!==((null==e?void 0:e.title)||(null==e?void 0:e.name))&&a?n.default.createElement(he,{title:"Remove",className:"close-button",size:20,onClick:()=>(e=>{confirm("Remove "+(e.title||e.name))&&i(e)})(e)}):null))))))},ve=({templates:e,selectedTemplate:t,setTemplate:r})=>n.default.createElement(ge,{items:e,item:t,deletable:!0,setItem:r,deleteItem:()=>{}});var ye=i(272),we=i.n(ye);const be=t=>{const n=window.SVG,{className:r}=t,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",r);return n?e.React.createElement(n,Object.assign({className:o,src:we()},a)):e.React.createElement("svg",Object.assign({className:o},a))};const Ee=({config:e,hazards:r,selectedHazard:a,setHazard:o,vertical:i,toggleNewHazardModal:s})=>{const[l,c]=n.default.useState([]);return n.default.useEffect((()=>{r&&c([...r])}),[r]),n.default.createElement("div",{style:{display:i?"block":"flex",alignItems:"center"}},n.default.createElement("style",null,"\n                     .action-icon {\n                        color: gray;\n                        cursor: pointer;\n                      }\n                    "),n.default.createElement(ge,{items:l,item:a,deletable:!0,setItem:o,deleteItem:t=>{return n=void 0,r=void 0,o=function*(){const n=yield function(e,t){return se(this,void 0,void 0,(function*(){const n=yield Q(t.hazards,[e.objectId],t);return n.deleteResults&&n.deleteResults.every((e=>e.success))?{data:!0}:{errors:JSON.stringify(n)}}))}(t,e);if(n.errors)return console.log(n.errors),void ue(v.CLSSActionKeys.SET_ERRORS,n.errors);console.log(`${t.title} deleted`),c([...l.filter((e=>e.id!==t.id))])},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{l(o.next(e))}catch(e){t(e)}}function s(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,s)}l((o=o.apply(n,r||[])).next())}));var n,r,a,o}}),i?n.default.createElement(t.Button,{"data-testid":"btnShowAddOrganization",className:" add-link",type:"link",style:{textAlign:"left"},onClick:()=>s(!0)},"Add New Hazard"):n.default.createElement(be,{className:"action-icon","data-testid":"btnAddNewHazard",title:"Add New Hazard",size:30,color:"gray",onClick:()=>s(!0)}))};const Se=({config:e,organizations:r,selectedOrganization:a,setOrganization:o,vertical:i,toggleNewOrganizationModal:s})=>{const[l,c]=n.default.useState([]);return n.default.useEffect((()=>{r&&c([...r])}),[r]),n.default.createElement("div",{style:{display:i?"block":"flex",alignItems:"center"}},n.default.createElement(ge,{items:l,item:a,deletable:!0,setItem:o,deleteItem:t=>{return n=void 0,r=void 0,o=function*(){const n=yield function(e,t){return se(this,void 0,void 0,(function*(){const n=yield Q(t.organizations,[e.objectId],t);return n.deleteResults&&n.deleteResults.every((e=>e.success))?{data:!0}:{errors:JSON.stringify(n)}}))}(t,e);if(n.errors)return console.log(n.errors),void ue(v.CLSSActionKeys.SET_ERRORS,n.errors);console.log(`${t.title} deleted`),c([...l.filter((e=>e.id!==t.id))])},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{l(o.next(e))}catch(e){t(e)}}function s(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,s)}l((o=o.apply(n,r||[])).next())}));var n,r,a,o}}),s?i?n.default.createElement(t.Button,{"data-testid":"btnShowAddOrganization",className:" add-link",type:"link",style:{textAlign:"left"},onClick:()=>s(!0)},"Add New Organization"):n.default.createElement(be,{className:"action-icon","data-testid":"btnAddNewOrganization",title:"Add New Organization",size:30,color:"gray",onClick:()=>s(!0)}):null)},Oe=e=>n.default.createElement(t.Modal,{isOpen:e.visible,centered:!0,className:"clss-modal"},n.default.createElement("style",null,"\n                        .clss-modal .modal-content{\n                          font-size: 1.3rem;\n                          display: flex;\n                          flex-direction: column\n                        }              \n                        .clss-modal .modal-title{\n                            font-size: 1.1em;\n                        }         \n                        .clss-modal input{\n                            padding-left: 0px;\n                        }                   \n                        .clss-modal .jimu-input span{\n                            height: 40px;\n                            font-size: .9em;\n                        }                         \n                        .clss-modal label{\n                            color: gray;\n                        }    \n                        .clss-modal .jimu-dropdown-button{\n                            font-size: 1em;\n                        }    \n                        .clss-modal .modal-item{\n                            margin: 10px 0;\n                        }   \n                        .clss-modal textarea{\n                            font-size: 0.8em;\n                        }  \n                        .clss-modal .spacer{\n                            width: 1em;\n                        }\n                    "),n.default.createElement(t.ModalHeader,{toggle:()=>e.toggleVisibility(!1)},e.title),n.default.createElement(t.ModalBody,null,e.children),e.hideFooter&&1==e.hideFooter?null:n.default.createElement(t.ModalFooter,null,n.default.createElement(t.Button,{onClick:()=>e.cancel?e.cancel():e.toggleVisibility(!1)},e.noButtonTitle||"Cancel"),n.default.createElement("div",{className:"spacer"}),n.default.createElement(t.Button,{"data-testid":"btnSave",disabled:e.disable,onClick:()=>e.save()},e.yesButtonTitle||"Save")),e.loading?n.default.createElement(g,null):null);const{useSelector:Te}=e.ReactRedux,Ie=e=>{const[r,a]=n.default.useState(""),[o,i]=n.default.useState(!1),[s,l]=n.default.useState(e.visible),[c,d]=n.default.useState(""),[u,p]=n.default.useState(null);return n.default.useEffect((()=>{l(e.visible)}),[e]),n.default.useEffect((()=>{e.templates&&1===e.templates.length&&p(e.templates[0])}),[e]),n.default.createElement(Oe,{title:"Add New Template",disable:!(c&&u&&!r),save:()=>{return t=void 0,n=void 0,a=function*(){var t;if(e.templates.find((e=>e.name.toLowerCase().trim()===c.toLowerCase().trim())))return void ue(v.CLSSActionKeys.SET_ERRORS,`Template: ${c} already exists`);i(!0);let n=Object.assign(Object.assign({},u),{name:c,title:c}),r=null;e.selectedOrganization&&"-None-"!==e.selectedOrganization.title&&(r=e.selectedOrganization);let a=null;e.selectedHazard&&"-None-"!==e.selectedHazard.title&&(a=e.selectedHazard);const o=(new Date).getTime(),s=yield function(e,t,n,r,a){return se(this,void 0,void 0,(function*(){pe(e.templates,y),pe(t,"Template data not provided");const o=(new Date).getTime(),i=t.name[0].toLocaleUpperCase()+t.name.substring(1);let s={attributes:{OrganizationID:r?r.id:null,OrganizationName:r?r.name:null,OrganizationType:r?r.type.code?r.type.code:r.type:null,HazardID:a?a.id:null,HazardName:a?a.name:null,HazardType:a?a.type.code?a.type.code:a.type:null,Name:i,Creator:n,CreatedDate:o,Status:1,IsSelected:0,Editor:n,EditedDate:o}},l=yield X(e.templates,[s],e);if(l.addResults&&l.addResults.every((e=>e.success))){const n=l.addResults[0].globalId,r=function(e){return[].concat.apply([],[].concat.apply([],e.lifelineTemplates.map((e=>e.componentTemplates))).map((e=>e.indicators)))}(t),a=r.map((e=>({attributes:{TemplateID:n,ComponentID:e.componentId,ComponentName:e.componentName,Name:e.name,TemplateName:i,LifelineName:e.lifelineName}})));if(l=yield X(e.indicators,a,e),l.addResults&&l.addResults.every((e=>e.success))){const t=`GlobalID IN (${l.addResults.map((e=>`'${e.globalId}'`)).join(",")})`,n=yield Y(e.indicators,t,e);let a=[];for(let e of n){const t=r.find((t=>t.name===e.attributes.Name));if(t){const n=t.weights.map((t=>({attributes:{IndicatorID:e.attributes.GlobalID,Name:t.name,Weight:t.weight,ScaleFactor:0,AdjustedWeight:0,MaxAdjustedWeight:0}})));a=a.concat(n)}}if(l=yield X(e.weights,a,e),l.addResults&&l.addResults.every((e=>e.success)))return{data:!0}}}return Z(JSON.stringify(l),B.ERROR,"createNewTemplate"),{errors:"Error occurred while creating the new template"}}))}(e.config,n,null===(t=e.user)||void 0===t?void 0:t.userName,r,a);console.log("Create Template Took",(new Date).getTime()-o),i(!1),s.errors?ue(v.CLSSActionKeys.SET_ERRORS,s.errors):(e.saveTemplateCompleteCallback(),i(!1),e.toggleVisibility(!1))},new((r=void 0)||(r=Promise))((function(e,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,s)}l((a=a.apply(t,n||[])).next())}));var t,n,r,a},loading:o,toggleVisibility:e.toggleVisibility,visible:s},n.default.createElement("div",{className:"new-template"},n.default.createElement("style",null,"                    \n                      .new-template{\n                        display: flex;\n                        flex-direction: column;\n                      }                      \n                      .new-template .add-link {\n                        width: 207px;\n                        margin-left: -16px;\n                      }\n                    "),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Template Name",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(t.TextInput,{"data-testid":"txtTemplateName",className:"template-input",size:"default",onChange:e=>d(e.target.value),value:c})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Base Template On",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(ve,{templates:e.templates,selectedTemplate:u,setTemplate:p})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Template Hazard (Optional)"),n.default.createElement(Ee,{config:e.config,hazards:e.hazards,selectedHazard:e.selectedHazard,setHazard:e.setHazard,vertical:!0,toggleNewHazardModal:e.toggleNewHazardModal})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Template Organization (Optional)"),n.default.createElement(Se,{config:e.config,vertical:!0,organizations:e.organizations,selectedOrganization:e.selectedOrganization,setOrganization:e.setOrganization,toggleNewOrganizationModal:e.toggleNewOrganizationModal}))))};const{useSelector:Ne}=e.ReactRedux,ke=({propsConfig:e,visible:r,toggle:a,setOrganization:o})=>{const[i,s]=n.default.useState(!1),[l,c]=n.default.useState(!1),[d,u]=n.default.useState(""),[p,f]=n.default.useState([]),[m,h]=n.default.useState(null),[g,y]=n.default.useState(null),[b,E]=n.default.useState(null),S=Ne((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.organizations})),O=Ne((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.authenticate}));return n.default.useEffect((()=>{c(r),u(""),h(null)}),[r]),n.default.useEffect((()=>{O&&E(Object.assign(Object.assign({},e),{credential:O}))}),[O]),n.default.useEffect((()=>{if(S&&S.length>0){const e=S[1].domains;null==e||e.orderBy("name"),f(e)}}),[S]),n.default.useEffect((()=>{y(S[0])}),[S]),n.default.createElement(Oe,{title:"Add New Organization",disable:!(d&&m),save:()=>{return e=void 0,t=void 0,r=function*(){if(S.find((e=>e.name===d)))ue(v.CLSSActionKeys.SET_ERRORS,`Organization: ${d} already exists`);else{s(!0);try{let e={name:d,title:d,type:m,parentId:"000"!==g.id?g.id:null};const t=yield function(e,t){var n;return se(this,void 0,void 0,(function*(){pe(e.organizations,w),pe(t,"Organization object not provided");const r={attributes:{Name:t.name,Type:null===(n=t.type)||void 0===n?void 0:n.code,DisplayTitle:t.name,ParentID:null==t?void 0:t.parentId}},a=yield X(e.organizations,[r],e);return a.addResults&&a.addResults.every((e=>e.success))?{data:Object.assign({},t)}:{errors:JSON.stringify(a)}}))}(b,e);if(console.log(t),t.errors)throw new Error(String(t.errors));e=t.data,e.domains=S[1].domains,ue(v.CLSSActionKeys.LOAD_ORGANIZATIONS_ACTION,[...S,e]),o(t.data),a(!1)}catch(e){console.log(e),ue(v.CLSSActionKeys.SET_ERRORS,e.message)}finally{s(!1)}}},new((n=void 0)||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r},loading:i,toggleVisibility:a,visible:l},n.default.createElement("div",{className:"add-organization"},n.default.createElement("style",null,"\n                        .add-organization{\n                           display: flex;\n                           flex-direction: column\n                         }                         \n                     "),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Organization Name",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(t.TextInput,{"data-testid":"txtOrganizationName",size:"default",onChange:e=>u(e.target.value),value:d})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Organization Type",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(ge,{items:p,item:m,deletable:!1,setItem:h})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Organization's Parent (Optional)"),n.default.createElement(Se,{config:b,toggleNewOrganizationModal:null,organizations:S,selectedOrganization:g,setOrganization:y,vertical:!1}))))};const{useSelector:Ae}=e.ReactRedux,Re=({props:e,visible:r,toggle:a,setHazard:o})=>{const[i,s]=n.default.useState(!1),[l,c]=n.default.useState(!1),[d,u]=n.default.useState(""),[p,f]=n.default.useState(""),[m,h]=n.default.useState([]),[g,y]=n.default.useState(null),[w,b]=n.default.useState(null),E=Ae((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.authenticate})),S=Ae((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.hazards}));return n.default.useEffect((()=>{E&&b(Object.assign(Object.assign({},e.config),{credential:E}))}),[E]),n.default.useEffect((()=>{if(S&&S.length>0){const e=S[1].domains;e.orderBy("name"),h(e)}}),[S]),n.default.useEffect((()=>{c(r),u(""),f(""),y(null)}),[r]),n.default.createElement(Oe,{title:"Add New Hazard",disable:!(d&&g),save:()=>{return e=void 0,t=void 0,r=function*(){if(S.find((e=>e.name.toLowerCase()===d.toLowerCase().trim())))ue(v.CLSSActionKeys.SET_ERRORS,`Hazard: ${d} already exists`);else{s(!0);try{let e={name:d,title:d,type:g,description:p};const t=yield function(e,t){return se(this,void 0,void 0,(function*(){const n={attributes:{Name:t.name,DisplayTitle:t.name,Type:t.type.code,Description:t.description}},r=yield X(e.hazards,[n],e);return r.addResults&&r.addResults.every((e=>e.success))?{data:Object.assign(Object.assign({},t),{objectId:r.addResults[0].objectId,id:r.addResults[0].globalId})}:(Z("Error occurred while saving hazard. Restarting the application may fix this issue.",B.ERROR,"saveHazard"),{errors:"Error occurred while saving hazard. Restarting the application may fix this issue."})}))}(w,e);if(console.log(t),t.errors)throw new Error(String(t.errors));e=t.data,e.domains=S[1].domains,ue(v.CLSSActionKeys.LOAD_HAZARDS_ACTION,[...S,e]),o(e),a(!1)}catch(e){console.log(e),ue(v.CLSSActionKeys.SET_ERRORS,e.message)}finally{s(!1)}}},new((n=void 0)||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r},toggleVisibility:a,visible:l,loading:i},n.default.createElement("div",{className:"hazards"},n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Hazard Name",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(t.TextInput,{onChange:e=>u(e.target.value),value:d})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Hazard Type",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(ge,{items:m,item:g,deletable:!1,setItem:y})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Description of Hazard (Optional)"),n.default.createElement(t.TextArea,{value:p,onChange:e=>f(e.target.value)}))))};var xe=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))};const{useSelector:Ce}=e.ReactRedux,_e=n=>{var a,o,i;const[s,l]=e.React.useState(!1),[c,d]=e.React.useState(!1),[u,p]=e.React.useState(!1),[f,m]=e.React.useState(!1),[b,O]=e.React.useState(null),[T,I]=e.React.useState(null),[N,k]=e.React.useState([]),[A,R]=e.React.useState(null),[x,C]=e.React.useState("All"),[_,L]=e.React.useState(""),D=(Ce((e=>e.clssState)),Ce((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.user}))),z=Ce((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.authenticate})),j=Ce((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.errors})),P=Ce((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.templates})),M=Ce((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.hazards})),H=Ce((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.organizations}));e.React.useEffect((()=>{var e;e=n.config.appId,se(void 0,void 0,void 0,(function*(){console.log("initializeAuth called");let t=yield ae(e,E);t||(t=yield ne(e,E));const n={expires:t.expires,server:t.server,ssl:t.ssl,token:t.token,userId:t.userId};ue(v.CLSSActionKeys.AUTHENTICATE_ACTION,n)}))}),[]),e.React.useEffect((()=>{if(A&&(!M||0===M.length)){const e=(new Date).getTime();(function(e,t,n){return se(this,void 0,void 0,(function*(){const t=yield function(e,t,n){return se(this,void 0,void 0,(function*(){return console.log("get Hazards called by "+n),pe(e.hazards,"Hazard FeatureLayer URL not provided"),yield $(e.hazards,t,e)}))}(e,"1=1","clss-templates");return t&&0!=t.features.length?t.features.map((e=>({objectId:e.attributes.OBJECTID,id:e.attributes.GlobalID,name:e.attributes.Name,title:e.attributes.DisplayTitle||e.attributes.DisplayName||e.attributes.Name,type:e.attributes.Type,description:e.attributes.Description,domains:t.fields.find((e=>"Type"===e.name)).domain.codedValues}))):[]}))})(A).then((t=>{t&&t.length>0&&(t.orderBy("name"),t.unshift(S),ue(v.CLSSActionKeys.LOAD_HAZARDS_ACTION,t)),console.log("Hazards took: "+((new Date).getTime()-e)+" ms")}))}}),[A]),e.React.useEffect((()=>{if(A&&(!H||0===H.length)){const e=(new Date).getTime();(function(e,t){return se(this,void 0,void 0,(function*(){console.log("get Organizations called"),pe(e.organizations,w);const t=yield $(e.organizations,"1=1",e);return t&&t.features&&t.features.length>0?t.features.map((e=>({objectId:e.attributes.OBJECTID,id:e.attributes.GlobalID,name:e.attributes.Name,title:e.attributes.Name,type:e.attributes.Type,parentId:e.attributes.ParentID,description:e.attributes.Description,domains:t.fields.find((e=>"Type"===e.name)).domain.codedValues}))):[]}))})(A).then((t=>{t&&t.length>0&&(t.orderBy("name"),t.unshift(S),ue(v.CLSSActionKeys.LOAD_ORGANIZATIONS_ACTION,t)),console.log("Organizations took: "+((new Date).getTime()-e)+" ms")}))}}),[A]),e.React.useEffect((()=>{z&&R(Object.assign(Object.assign({},n.config),{credential:z}))}),[z]),e.React.useEffect((()=>{A&&U()}),[A]),e.React.useEffect((()=>{j&&(alert(j),ue(v.CLSSActionKeys.SET_ERRORS,""))}),[j]),e.React.useEffect((()=>{var e,t,r,a,o;ue(v.CLSSActionKeys.SET_USER_ACTION,{userName:null===(e=n.user)||void 0===e?void 0:e.username,firstName:null===(t=n.user)||void 0===t?void 0:t.firstName,lastName:null===(r=n.user)||void 0===r?void 0:r.lastName,groups:null===(o=null===(a=n.user)||void 0===a?void 0:a.groups)||void 0===o?void 0:o.map((e=>e.title))})}),[n.user]),e.React.useEffect((()=>{P&&P.length>0&&W(x,P)}),[P]);const U=()=>xe(void 0,void 0,void 0,(function*(){l(!0);const e=(new Date).getTime(),t=yield function(e,t,n){return se(this,void 0,void 0,(function*(){const r=e.templates,a=e.lifelines,o=e.components;try{pe(r,y),pe(a,"Lifeline FeatureLayer URL not provided"),pe(o,"Component FeatureLayer URL not provided");const i=t?`GlobalID='${t}`:n||"1=1",s=yield Promise.all([de(i,e),le("1=1",e),ce("1=1",e)]),l=s[0],c=s[1],d=s[2],u=yield function(e,t){return se(this,void 0,void 0,(function*(){return console.log("get Indicators called"),yield Y(t.indicators,"1=1",t)}))}(0,e),p=yield function(e,t){return se(this,void 0,void 0,(function*(){return console.log("get Weights called"),yield Y(t.weights,"1=1",t)}))}(0,e),f=yield Promise.all(l.features.map((e=>se(this,void 0,void 0,(function*(){const t=u.filter((t=>t.attributes.TemplateID==e.attributes.GlobalID));return yield function(e,t,n,r,a,o){return se(this,void 0,void 0,(function*(){const i=r.filter((t=>t.attributes.TemplateID=`'${e.attributes.GlobalID}'`)),s=i.map((e=>e.attributes.GlobalID)),l=(a.filter((e=>s.indexOf(e.attributes.IndicatorID))),i.map((e=>{const t=a.filter((t=>t.attributes.IndicatorID===e.attributes.GlobalID)).map((e=>({objectId:e.attributes.OBJECTID,name:e.attributes.Name,weight:e.attributes.Weight,scaleFactor:e.attributes.ScaleFactor,adjustedWeight:e.attributes.AdjustedWeight,maxAdjustedWeight:e.attributes.MaxAdjustedWeight})));return{objectId:e.attributes.OBJECTID,id:e.attributes.GlobalID,name:e.attributes.Name,templateName:e.attributes.TemplateName,weights:t,componentId:e.attributes.ComponentID,templateId:e.attributes.TemplateID,componentName:e.attributes.ComponentName,lifelineName:e.attributes.LifelineName}}))),c=n.map((e=>({id:e.attributes.GlobalID,title:e.attributes.DisplayName||e.attributes.DisplayTitle,name:e.attributes.Name,lifelineId:e.attributes.LifelineID,indicators:l.filter((t=>t.componentId===e.attributes.GlobalID)).orderBy("name")}))),d=t.map((e=>({id:e.attributes.GlobalID,title:e.attributes.DisplayName||e.attributes.DisplayTitle,name:e.attributes.Name,componentTemplates:c.filter((t=>t.lifelineId===e.attributes.GlobalID)).orderBy("title")})));return{objectId:e.attributes.OBJECTID,id:e.attributes.GlobalID,isSelected:1==e.attributes.IsSelected,status:{code:e.attributes.Status,name:1===e.attributes.Status?"Active":"Archived"},name:e.attributes.Name,hazardName:e.attributes.HazardName,hazardType:e.attributes.HazardType,organizationName:e.attributes.OrganizationName,organizationType:e.attributes.OrganizationType,creator:e.attributes.Creator,createdDate:Number(e.attributes.CreatedDate),editor:e.attributes.Editor,editedDate:Number(e.attributes.EditedDate),lifelineTemplates:d.orderBy("title"),domains:o}}))}(e,c,d,t,p,l.fields.find((e=>"Status"===e.name)).domain.codedValues)})))));return f.filter((e=>e.isSelected)).length>1||0==f.filter((e=>e.isSelected)).length?{data:f.map((e=>Object.assign(Object.assign({},e),{isSelected:"Baseline"===e.name})))}:1===f.length?{data:f.map((e=>Object.assign(Object.assign({},e),{isSelected:!0})))}:{data:f}}catch(e){return Z(e,B.ERROR,"getTemplates"),{errors:"Templates request failed."}}}))}(A,null,null);console.log("Templates Took",(new Date).getTime()-e),l(!1),t.errors?ue(v.CLSSActionKeys.SET_ERRORS,t.errors):(ue(v.CLSSActionKeys.LOAD_TEMPLATES_ACTION,t.data),yield W(x,t.data))})),F=e=>{L(e);let t=[...P];if(!e||""===e||null===e)return oe(t,"createdDate");let n=t.filter((t=>{var n,r,a,o,i,s,l,c;return(null===(n=t.name)||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase()))||(null===(r=t.organizationName)||void 0===r?void 0:r.toLocaleLowerCase().includes(e.toLocaleLowerCase()))||(null===(a=t.hazardName)||void 0===a?void 0:a.toLocaleLowerCase().includes(e.toLocaleLowerCase()))||(null===(o=t.hazardType)||void 0===o?void 0:o.toLocaleLowerCase().includes(e.toLocaleLowerCase()))||(null===(i=ie(t.createdDate))||void 0===i?void 0:i.split(",")[0].trim())==e||(null===(s=ie(t.createdDate))||void 0===s?void 0:s.includes(e))||(null===(l=ie(t.editedDate))||void 0===l?void 0:l.includes(e))||(null===(c=ie(t.editedDate))||void 0===c?void 0:c.split(",")[0].trim())==e}));return oe(n,"createdDate")},G=e=>xe(void 0,void 0,void 0,(function*(){})),q=e=>{W(e,F(_))},W=(e,t)=>xe(void 0,void 0,void 0,(function*(){if(null!=t)switch(C(e),e){case"All":k([...t]);break;case"Selected":k(t.filter((e=>e.isSelected)));break;case"Active":k(t.filter((e=>1===e.status.code)));break;case"Archived":k(t.filter((e=>0===e.status.code)))}}));return e.React.createElement("div",{className:"widget-clss-templates-container jimu-widget",style:{backgroundColor:n.theme.surfaces[2].bg}},e.React.createElement("style",null,"\n          .widget-clss-templates-container{       \n            overflow: hidden; \n          }\n          .search-templates{\n              width: 100%;\n              flex: 1;\n              padding-bottom: 10px;\n              overflow-y: auto;\n              overflow-x: hidden;\n          }\n          .clss-templates-header{\n            height: 50px;\n            display: flex;\n            justify-content: center;\n            align-items: center;               \n          }\n          .template-buttons-content{\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            padding: 20px 10px;\n            height: calc(100% - 50px);\n            \n          }\n          .create-assessment-button{               \n            height: 65px;\n            width: 100%;\n            font-weight: bold;\n            font-size: 1.5em;\n            border-radius: 5px;\n            line-height: 1.5em;\n          }\n          .create-assessment-button:hover{\n              opacity: 0.8\n          }\n          .create-new-template{\n            height: 50px;\n            font-weight: bold;\n          }\n          .create-new-template:hover{\n            opacity: .8\n          }          \n          .widget-clss-templates-container .editor-icon{                    \n            color: #534c4c;\n            cursor: pointer;\n            margin: 10px;\n          }\n          .widget-clss-templates-container .editor-icon:hover{\n            opacity: .8\n          }\n          .widget-clss-templates-container .save-cancel, \n          .widget-clss-templates-container .save-icon{\n            position: absolute;\n            right: 10px;\n            top: 10px;\n          }\n          .widget-clss-templates-container .data-dropdown, \n          .widget-clss-templates-container .data-input{\n            width: 100%;\n            display: flex;\n          }\n          .widget-clss-templates-container .data-dropdown \n          .widget-clss-templates-container .jimu-dropdown{\n            width: 300px;\n          }\n          .widget-clss-templates-container .data-dropdown-menu{\n            width: 300px;\n          }\n          .widget-clss-templates-container .error{\n            color: red;\n            font-size: 15px;\n          }\n          .widget-clss-templates-container .dropdown-item{\n              font-size: 1.3em;\n          }\n          .widget-clss-templates-container .organization{\n            display: flex;\n            flex-direction: column;\n          }\n          .widget-clss-templates-container .end-widget{\n            margin-bottom: 15px;\n          }\n          .widget-clss-templates-container .data-input{\n            width: 30.7%\n          }\n          .widget-clss-templates-container .title.template{\n            width: 142px;\n          }\n\n          .widget-clss-templates-container td label, \n          .widget-clss-templates-container td input{ \n            font-size: 1.5em;\n          }\n          .widget-clss-templates-container td label{\n            width: 128px;\n          }\n          .widget-clss-templates-container td label.value{\n            font-weight: bold;\n            width: auto;\n          }\n          .widget-clss-templates-container tr.td-under>td{\n            padding-bottom: 1em;\n          }\n          .widget-clss-templates-container  .template-input input{\n            padding-left: 20px;\n            height: 40px;\n            font-size: 16px;\n          }\n          .widget-clss-templates-container  .template-input span{\n            height: 40px !important;\n          }\n          .template-filter-actions .actions{\n            display: flex;\n            justify-content: space-around;\n            align-items: center;\n          }\n          .template-filter-actions .jimu-checkbox{\n            margin-right: 10px;\n          }\n        "),e.React.createElement("div",{className:"clss-templates-header",style:{backgroundColor:n.config.headerBackgroundColor||n.theme.colors.secondary,color:n.config.headerTextColor||n.theme.colors.palette.primary[900],boxShadow:n.theme.boxShadows.default,fontSize:n.theme.typography.sizes.display3,fontWeight:n.theme.typography.weights.bold}},e.React.createElement(t.Label,{check:!0},"Templates")),e.React.createElement("div",{className:"template-buttons-content"},e.React.createElement("div",{className:"template-filter-actions"},e.React.createElement("h4",null,"Filter templates by:"),e.React.createElement("div",{className:"actions","aria-label":"Filter templates by",role:"group"},e.React.createElement(t.Label,{centric:!0},e.React.createElement(t.Checkbox,{id:"All","aria-label":"Checkbox",checked:"All"===x,onChange:e=>q(e.target.id)}),"All"),e.React.createElement(t.Label,{centric:!0},e.React.createElement(t.Checkbox,{id:"Active","aria-label":"Checkbox",checked:"Active"===x,onChange:e=>q(e.target.id)}),"Active"),e.React.createElement(t.Label,{centric:!0,check:!0},e.React.createElement(t.Checkbox,{id:"Archived","aria-label":"Checkbox",checked:"Archived"===x,onChange:e=>q(e.target.id)}),"Archived"))),e.React.createElement("div",{className:"search-templates"},e.React.createElement(r,{title:"Search Templates",onChange:e=>{W(x,F(e))},props:n}),null==N?void 0:N.map((t=>e.React.createElement(h,{key:t.id,props:n,template:t,onClick:()=>{return e=t.objectId,xe(void 0,void 0,void 0,(function*(){ue(v.CLSSActionKeys.LOAD_TEMPLATES_ACTION,P.map((t=>Object.assign(Object.assign({},t),{isSelected:t.objectId===e})))),P.find((t=>t.objectId===e)).status.code}));var e},onDblClick:G})))),D&&(null===(a=D.groups)||void 0===a?void 0:a.includes("CLSS_Admin"))||D&&(null===(o=D.groups)||void 0===o?void 0:o.includes("CLSS_Editor"))||D&&(null===(i=D.groups)||void 0===i?void 0:i.includes("CLSS Followers"))?e.React.createElement(t.Button,{"data-testid":"btnCreateNewTemplate",className:"create-new-template",style:{background:n.config.headerBackgroundColor},size:"lg",onClick:()=>d(!0)},"Create Template"):null,e.React.createElement(Ie,{config:A,hazards:M,selectedHazard:b,setHazard:O,selectedOrganization:T,organizations:H,setOrganization:I,templates:P,user:D,visible:c,toggleVisibility:d,saveTemplateCompleteCallback:()=>xe(void 0,void 0,void 0,(function*(){yield U(),d(!1)})),toggleNewHazardModal:m,toggleNewOrganizationModal:p}),e.React.createElement(ke,{propsConfig:null==n?void 0:n.config,visible:u,setOrganization:I,toggle:p}),e.React.createElement(Re,{props:n,visible:f,setHazard:O,toggle:m})),s?e.React.createElement(g,null):null)}})(),s})())}}}));