/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-ui","jimu-core/react","jimu-arcgis"],(function(e,t){var n={},a={},r={},i={};return{setters:[function(e){n.React=e.React,n.ReactRedux=e.ReactRedux,n.classNames=e.classNames,n.getAppStore=e.getAppStore},function(e){a.Button=e.Button,a.Dropdown=e.Dropdown,a.DropdownButton=e.DropdownButton,a.DropdownMenu=e.DropdownMenu,a.Icon=e.Icon,a.Label=e.Label,a.Loading=e.Loading,a.Modal=e.Modal,a.ModalBody=e.ModalBody,a.ModalFooter=e.ModalFooter,a.ModalHeader=e.ModalHeader,a.NumericInput=e.NumericInput,a.Tab=e.Tab,a.Tabs=e.Tabs,a.TextArea=e.TextArea,a.TextInput=e.TextInput},function(e){r.default=e.default},function(){}],execute:function(){e((()=>{var e={2957:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 2.443 5.851 14 0 8.115l1.45-1.538 4.31 4.334L14.463 1 16 2.443Z" fill="#000"></path></svg>'},131:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-5.737-3.394a.8.8 0 0 1 1.131 1.131L9.132 8l2.262 2.263a.8.8 0 0 1-1.131 1.131L8 9.131l-2.263 2.263a.8.8 0 0 1-1.13-1.131L6.868 8 4.606 5.737a.8.8 0 1 1 1.131-1.131L8 6.869l2.263-2.263Z" fill="#000"></path></svg>'},7373:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.795 1.282c.387-.387 1.028-.374 1.431.03l1.462 1.462c.404.403.417 1.044.03 1.431L5.413 11.51l-2.674.48a.637.637 0 0 1-.73-.73l.48-2.673 7.306-7.305ZM2 13a1 1 0 1 0 0 2h12a1 1 0 1 0 0-2H2Z" fill="#000"></path></svg>'},5648:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3a2 2 0 0 1 2-2h8.086a1 1 0 0 1 .707.293l2.914 2.914a1 1 0 0 1 .293.707V13a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3Zm1.75.75a1 1 0 0 1 1-1h5.875a1 1 0 0 1 1 1v1.5a1 1 0 0 1-1 1H3.75a1 1 0 0 1-1-1v-1.5Zm7.875 6.875a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" fill="#000"></path></svg>'},2304:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 8c0-3.85 3.15-7 7-7s7 3.15 7 7-3.15 7-7 7-7-3.15-7-7Zm7.875 4.375a.875.875 0 1 1-1.75 0 .875.875 0 0 1 1.75 0Zm-.063-2.656c.132-.571.415-.916.848-1.299.433-.383.701-.709.701-.709.39-.472.701-1.102.701-1.811 0-1.732-1.402-3.15-3.117-3.15-1.357 0-2.52.928-2.946 2.157-.06.152-.06.299-.06.299a.648.648 0 0 0 .668.694l.1-.006c.4-.046.679-.275.829-.65.078-.164.108-.208.122-.229.281-.416.754-.69 1.287-.69.858 0 1.559.709 1.559 1.575 0 .472-.156.866-.468 1.103l-.935 1.023c-.505.447-.806 1.049-.901 1.722a.614.614 0 0 0-.005.064v.117a.748.748 0 0 0 .75.696l.092-.005c.393-.043.714-.358.743-.74l.032-.161Z" fill="#000"></path></svg>'},5339:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746L8.746 8Z" fill="#000"></path></svg>'},9216:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.226 1.312c-.403-.404-1.044-.417-1.431-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431l-1.462-1.462Zm-8.113 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991-1.781.32Zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402 1.461 1.461Z" fill="#000"></path><path d="M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z" fill="#000"></path></svg>'},272:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0Zm1 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM7.5 4.5a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3Z" fill="#000"></path></svg>'},4357:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0v-6ZM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1Zm0 3V1H5v2h6Zm1.895 1h-9.79l.8 11h8.19l.8-11Z" fill="#000"></path></svg>'},6691:(e,t,n)=>{"use strict";var a;n.d(t,{CLSSActionKeys:()=>a}),function(e){e.AUTHENTICATE_ACTION="[CLSS-APPLICATION] authenicate credentials",e.LOAD_HAZARDS_ACTION="[CLSS-APPLICATION] load hazards",e.LOAD_HAZARD_TYPES_ACTION="[CLSS-APPLICATION] load hazard types",e.LOAD_ORGANIZATIONS_ACTION="[CLSS-APPLICATION] load organizations",e.LOAD_ORGANIZATION_TYPES_ACTION="[CLSS-APPLICATION] load organization types",e.LOAD_TEMPLATES_ACTION="[CLSS-APPLICATION] load templates",e.LOAD_PRIORITIES_ACTION="[CLSS-APPLICATION] load priorities",e.SELECT_TEMPLATE_ACTION="[CLSS-APPLICATION] select template",e.SEARCH_ACTION="[CLSS-APPLICATION] search for template",e.SIGN_IN_ACTION="[CLSS-APPLICATION] Sign in",e.SIGN_OUT_ACTION="[CLSS-APPLICATION] Sign out",e.SET_USER_ACTION="[CLSS-APPLICATION] Set CLSS User",e.SET_IDENTITY_ACTION="[CLSS-APPLICATION] Set Identity",e.SET_ERRORS="[CLSS-APPLICATION] Set global errors",e.TOGGLE_INDICATOR_EDITING="[CLSS-APPLICATION] Toggle indicator editing",e.SELECT_LIFELINESTATUS_ACTION="[CLSS-APPLICATION] Select a lifeline status",e.LOAD_ASSESSMENTS_ACTION="[CLSS-APPLICATION] Load assessments",e.SELECT_ASSESSMENT_ACTION="[CLSS-APPLICATION] Select assessment",e.LOAD_RATINGSCALES_ACTION="[CLSS-APPLICATION] Load rating scales",e.LOAD_SCALEFACTORS_ACTION="[CLSS-APPLICATION] Load constants"}(a||(a={}))},6826:e=>{"use strict";e.exports=i},8891:e=>{"use strict";e.exports=n},1315:e=>{"use strict";e.exports=r},726:e=>{"use strict";e.exports=a}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var l={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(l),o.d(l,{default:()=>Qe});var e=o(8891),t=o(726),n=o(1315);const a=({message:e})=>n.default.createElement("div",{style:{height:"100%",width:"100%",position:"absolute",background:"rgb(0 0 0 / 13%)",top:0,left:0,zIndex:999999,display:"flex",justifyContent:"center",alignItems:"center"}},n.default.createElement(t.Loading,{className:"",type:"SECONDARY"}),n.default.createElement("h3",null,e));var r=o(6691);const i="CLSS_Admin",s="CLSS_Editor",d="CLSS Followers",c="Baseline",u="Template FeatureLayer URL not provided",m="Indicator FeatureLayer URL not provided",f="Importance of Indicator",p="Life Safety",h="Incident Stabilization",g="Property Protection",v="Environment Preservation",y=100;var w;!function(e){e.HEADER="header",e.INDICATOR_NAME="Indicator Name",e.PRIORITIES="Indicator Priorities",e.NEW_INDICATOR="Create New Indicator",e.DELETE_INDICATOR="Delete Indicator"}(w||(w={}));var E=function(){return E=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},E.apply(this,arguments)};function b(e){return"string"!=typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}function O(e){return Object.keys(e).some((function(t){var n=e[t];if(!n)return!1;switch(n&&n.toParam&&(n=n.toParam()),n.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function N(e){var t={};return Object.keys(e).forEach((function(n){var a,r,i=e[n];if(i&&i.toParam&&(i=i.toParam()),i||0===i||"boolean"==typeof i||"string"==typeof i){var o;switch(i.constructor.name){case"Array":var l=null===(r=null===(a=i[0])||void 0===a?void 0:a.constructor)||void 0===r?void 0:r.name;o="Array"===l?i:"Object"===l?JSON.stringify(i):i.join(",");break;case"Object":o=JSON.stringify(i);break;case"Date":o=i.valueOf();break;case"Function":o=null;break;case"Boolean":o=i+"";break;default:o=i}(o||0===o||"string"==typeof o||Array.isArray(o))&&(t[n]=o)}})),t}function S(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((function(t){return S(e,t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function x(e){var t=N(e);return Object.keys(t).map((function(e){return S(e,t[e])})).join("&")}var T=function(e,t){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},T(e,t)},R=function(){return R=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},R.apply(this,arguments)},I=function(e,t,n,a,r){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=n,this.url=a,this.options=r};(I.prototype=Object.create(Error.prototype)).constructor=I;var k="@esri/arcgis-rest-js",A={httpMethod:"POST",params:{f:"json"}},C=function(e){function t(t,n,a,r,i){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===n&&(n="AUTHENTICATION_ERROR_CODE");var o=e.call(this,t,n,a,r,i)||this;return o.name="ArcGISAuthError",o.message="AUTHENTICATION_ERROR_CODE"===n?t:n+": "+t,o}return function(e,t){function n(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.retry=function(e,t){var n=this;void 0===t&&(t=3);var a=0,r=function(i,o){e(n.url,n.options).then((function(e){var t=R(R({},n.options),{authentication:e});return a+=1,j(n.url,t)})).then((function(e){i(e)})).catch((function(e){"ArcGISAuthError"===e.name&&a<t?r(i,o):"ArcGISAuthError"===e.name&&a>=t?o(n):o(e)}))};return new Promise((function(e,t){r(e,t)}))},t}(I);function j(e,t){void 0===t&&(t={params:{f:"json"}});var n=R(R(R({httpMethod:"POST"},A),t),{params:R(R({},A.params),t.params),headers:R(R({},A.headers),t.headers)}),a=[],r=[];if(n.fetch||"undefined"==typeof fetch?(a.push("`fetch`"),r.push("`node-fetch`")):n.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(a.push("`Promise`"),r.push("`es6-promise`")),"undefined"==typeof FormData&&(a.push("`FormData`"),r.push("`isomorphic-form-data`")),!n.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+a.join(", ")+". We recommend installing the "+r.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var i=n.httpMethod,o=n.authentication,l=n.rawResponse,s=R({f:"json"},n.params),d=null,c={method:i,credentials:n.credentials||"same-origin"};return n.headers&&n.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(c.credentials="include"),(o?o.getToken(e,{fetch:n.fetch}).catch((function(t){return t.url=e,t.options=n,d=t,Promise.resolve("")})):Promise.resolve("")).then((function(t){t.length&&(s.token=t),o&&o.getDomainCredentials&&(c.credentials=o.getDomainCredentials(e));var a={};if("GET"===c.method){s.token&&n.hideToken&&"undefined"==typeof window&&(a["X-Esri-Authorization"]="Bearer "+s.token,delete s.token);var r=""===x(s)?e:e+"?"+x(s);n.maxUrlLength&&r.length>n.maxUrlLength||s.token&&n.hideToken?(c.method="POST",t.length&&n.hideToken&&(s.token=t,delete a["X-Esri-Authorization"])):e=r}var i=new RegExp("/items/.+/updateResources").test(e);return"POST"===c.method&&(c.body=function(e,t){var n=O(e)||t,a=N(e);if(n){var r=new FormData;return Object.keys(a).forEach((function(e){if("undefined"!=typeof Blob&&a[e]instanceof Blob){var t=a.fileName||a[e].name||e;r.append(e,a[e],t)}else r.append(e,a[e])})),r}return x(e)}(s,i)),c.headers=R(R({},a),n.headers),"undefined"!=typeof window||c.headers.referer||(c.headers.referer=k),O(s)||i||(c.headers["Content-Type"]="application/x-www-form-urlencoded"),n.fetch(e,c)})).then((function(t){if(!t.ok){var a=t.status,r=t.statusText;throw new I(r,"HTTP "+a,t,e,n)}if(l)return t;switch(s.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((function(t){if("json"!==s.f&&"geojson"!==s.f||l)return t;var a=function(e,t,n,a,r){if(e.code>=400){var i=e.message,o=e.code;throw new I(i,o,e,t,a)}if(e.error){var l=e.error,s=(i=l.message,o=l.code,l.messageCode),d=s||o||"UNKNOWN_ERROR_CODE";if(498===o||499===o||"GWM_0003"===s||400===o&&"Unable to generate token."===i)throw r||new C(i,d,e,t,a);throw new I(i,d,e,t,a)}if("failed"===e.status||"failure"===e.status){i=void 0,o="UNKNOWN_ERROR_CODE";try{i=JSON.parse(e.statusMessage).message,o=JSON.parse(e.statusMessage).code}catch(t){i=e.statusMessage||e.message}throw new I(i,o,e,t,a)}return e}(t,e,0,n,d);if(d){var r=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];n.authentication.federatedServers[r]={token:[],expires:new Date(Date.now()+864e5)},d=null}return a}))}function L(e,t){var n=t;return"undefined"!=typeof window&&window.location&&window.location.host?n.params.referer=window.location.host:n.params.referer=k,j(e,n)}function _(e,t){var n=t;return n.rawResponse=!1,j(e,n).then((function(e){var t={token:e.access_token,username:e.username,expires:new Date(Date.now()+(1e3*e.expires_in-1e3)),ssl:!0===e.ssl};return e.refresh_token&&(t.refreshToken=e.refresh_token),t}))}var z=/^https?:\/\/(\S+)\.arcgis\.com.+/;function D(e){return z.test(e)}function P(e){if(!z.test(e))return null;var t=e.match(z)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}var M,U,H=function(){function e(e){if(this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.username=e.username,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?b(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.refreshTokenTTL=e.refreshTokenTTL||20160,this.server=e.server,this.federatedServers={},this.trustedDomains=[],e.server){var t=this.getServerRootUrl(e.server);this.federatedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trustedServers",{get:function(){return console.log("DEPRECATED: use federatedServers instead"),this.federatedServers},enumerable:!1,configurable:!0}),e.beginOAuth2=function(t,n){void 0===n&&(n=window),t.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var a,r=E({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",expiration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:t.clientId,locale:""},t),i=r.portal,o=r.provider,l=r.clientId,s=r.expiration,d=r.redirectUri,c=r.popup,u=r.popupWindowFeatures,m=r.state,f=r.locale,p=r.params;if(a="arcgis"===o?i+"/oauth2/authorize?client_id="+l+"&response_type=token&expiration="+(t.duration||s)+"&redirect_uri="+encodeURIComponent(d)+"&state="+m+"&locale="+f:i+"/oauth2/social/authorize?client_id="+l+"&socialLoginProviderName="+o+"&autoAccountCreateForSocial=true&response_type=token&expiration="+(t.duration||s)+"&redirect_uri="+encodeURIComponent(d)+"&state="+m+"&locale="+f,p&&(a=a+"&"+x(p)),c){var h,g=((h={promise:null,resolve:null,reject:null}).promise=new Promise((function(e,t){h.resolve=e,h.reject=t})),h);return n["__ESRI_REST_AUTH_HANDLER_"+l]=function(t,n){if(t){var a=JSON.parse(t);g.reject(new C(a.errorMessage,a.error))}else if(n){var r=JSON.parse(n);g.resolve(new e({clientId:l,portal:i,ssl:r.ssl,token:r.token,tokenExpires:new Date(r.expires),username:r.username}))}},n.open(a,"oauth-window",u),g.promise}n.location.href=a},e.completeOAuth2=function(t,n){void 0===n&&(n=window);var a=E({portal:"https://www.arcgis.com/sharing/rest",popup:!0},t),r=a.portal,i=a.clientId,o=a.popup;function l(t,a){try{var l=void 0,s="__ESRI_REST_AUTH_HANDLER_"+i;if(o&&(n.opener?n.opener.parent&&n.opener.parent[s]?l=n.opener.parent[s]:n.opener&&n.opener[s]&&(l=n.opener[s]):n!==n.parent&&n.parent&&n.parent[s]&&(l=n.parent[s]),l))return l(t?JSON.stringify(t):void 0,JSON.stringify(a)),void n.close()}catch(e){throw new C('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(t)throw new C(t.errorMessage,t.error);return new e({clientId:i,portal:r,ssl:a.ssl,token:a.token,tokenExpires:a.expires,username:a.username})}var s=n.location.hash.replace(/^#/,"").split("&").reduce((function(e,t){var n=function(e){var t=e.split("="),n=t[0],a=t[1];return{key:decodeURIComponent(n),value:decodeURIComponent(a)}}(t),a=n.key,r=n.value;return e[a]=r,e}),{});if(!s.access_token){var d=void 0,c="Unknown error";return s.error&&(d=s.error,c=s.error_description),l({error:d,errorMessage:c})}var u=s.access_token,m=new Date(Date.now()+1e3*parseInt(s.expires_in,10)-6e4),f=s.username;return l(void 0,{token:u,expires:m,ssl:"true"===s.ssl,username:f})},e.fromParent=function(t,n){var a;return!n&&window&&(n=window),new Promise((function(r,i){a=function(t){if(t.source===n.parent&&t.data)try{return r(e.parentMessageHandler(t))}catch(e){return i(e)}},n.addEventListener("message",a,!1),n.parent.postMessage({type:"arcgis:auth:requestCredential"},t)})).then((function(e){return n.removeEventListener("message",a,!1),e}))},e.authorize=function(e,t){e.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var n=E({portal:"https://arcgis.com/sharing/rest",expiration:20160},e),a=n.portal,r=n.clientId,i=n.expiration,o=n.redirectUri;t.writeHead(301,{Location:a+"/oauth2/authorize?client_id="+r+"&expiration="+(e.duration||i)+"&response_type=code&redirect_uri="+encodeURIComponent(o)}),t.end()},e.exchangeAuthorizationCode=function(t,n){var a=E({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:20160},t),r=a.portal,i=a.clientId,o=a.redirectUri,l=a.refreshTokenTTL;return _(r+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:i,redirect_uri:o,code:n}}).then((function(t){return new e({clientId:i,portal:r,ssl:t.ssl,redirectUri:o,refreshToken:t.refreshToken,refreshTokenTTL:l,refreshTokenExpires:new Date(Date.now()+60*(l-1)*1e3),token:t.token,tokenExpires:t.expires,username:t.username})}))},e.deserialize=function(t){var n=JSON.parse(t);return new e({clientId:n.clientId,refreshToken:n.refreshToken,refreshTokenExpires:new Date(n.refreshTokenExpires),username:n.username,password:n.password,token:n.token,tokenExpires:new Date(n.tokenExpires),portal:n.portal,ssl:n.ssl,tokenDuration:n.tokenDuration,redirectUri:n.redirectUri,refreshTokenTTL:n.refreshTokenTTL})},e.fromCredential=function(t){var n=void 0===t.ssl||t.ssl,a=t.expires||Date.now()+72e5;return new e({portal:t.server.includes("sharing/rest")?t.server:t.server+"/sharing/rest",ssl:n,token:t.token,username:t.userId,tokenExpires:new Date(a)})},e.parentMessageHandler=function(t){if("arcgis:auth:credential"===t.data.type)return e.fromCredential(t.data.credential);if("arcgis:auth:error"===t.data.type){var n=new Error(t.data.error.message);throw n.name=t.data.error.name,n}throw new Error("Unknown message type.")},e.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}},e.prototype.getUser=function(e){var t=this;if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);var n=this.portal+"/community/self",a=E(E({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=j(n,a).then((function(e){return t._user=e,t._pendingUserRequest=null,e})),this._pendingUserRequest},e.prototype.getPortal=function(e){var t=this;if(this._pendingPortalRequest)return this._pendingPortalRequest;if(this._portalInfo)return Promise.resolve(this._portalInfo);var n=this.portal+"/portals/self",a=E(E({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingPortalRequest=j(n,a).then((function(e){return t._portalInfo=e,t._pendingPortalRequest=null,e})),this._pendingPortalRequest},e.prototype.getUsername=function(){return this.username?Promise.resolve(this.username):this._user?Promise.resolve(this._user.username):this.getUser().then((function(e){return e.username}))},e.prototype.getToken=function(e,t){return a=e,r=D(n=this.portal),i=D(a),o=P(n),l=P(a),r&&i&&o===l||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t);var n,a,r,i,o,l},e.prototype.validateAppAccess=function(e){return this.getToken(this.portal).then((function(t){return function(e,t,n){return void 0===n&&(n="https://www.arcgis.com/sharing/rest"),j(n+"/oauth2/validateAppAccess",{method:"POST",params:{f:"json",client_id:t,token:e}})}(t,e)}))},e.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}},e.prototype.serialize=function(){return JSON.stringify(this)},e.prototype.enablePostMessageAuth=function(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)},e.prototype.disablePostMessageAuth=function(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)},e.prototype.refreshSession=function(e){return this._user=null,this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new C("Unable to refresh token."))},e.prototype.getServerRootUrl=function(e){var t=b(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0].match(/(https?:\/\/)(.+)/),n=(t[0],t[1]),a=t[2].split("/"),r=a[0],i=a.slice(1);return""+n+r.toLowerCase()+"/"+i.join("/")},e.prototype.getDomainCredentials=function(e){return this.trustedDomains&&this.trustedDomains.length&&this.trustedDomains.some((function(t){return e.startsWith(t)}))?"include":"same-origin"},e.prototype.createPostMessageHandler=function(e){var t=this;return function(n){var a=e.indexOf(n.origin)>-1,r="arcgis:auth:requestCredential"===n.data.type,i=t.tokenExpires.getTime()>Date.now();if(a&&r){var o={};if(i){var l=t.toCredential();l.server=l.server.replace("/sharing/rest",""),o={type:"arcgis:auth:credential",credential:l}}else o={type:"arcgis:auth:error",error:{name:"tokenExpiredError",message:"Session token was expired, and not returned to the child application"}};n.source.postMessage(o,n.origin)}}},e.prototype.getTokenForServer=function(e,t){var n=this,a=this.getServerRootUrl(e),r=this.federatedServers[a];return r&&r.expires&&r.expires.getTime()>Date.now()?Promise.resolve(r.token):(this._pendingTokenRequests[a]||(this._pendingTokenRequests[a]=this.fetchAuthorizedDomains().then((function(){return j(a+"/rest/info",{credentials:n.getDomainCredentials(e)}).then((function(r){if(r.owningSystemUrl){if(i=r.owningSystemUrl,o=n.portal,l=b(function(e){if(!z.test(e))return e;switch(P(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(o)).replace(/https?:\/\//,""),s=b(i).replace(/https?:\/\//,""),new RegExp(s,"i").test(l))return j(r.owningSystemUrl+"/sharing/rest/info",t);throw new C(e+" is not federated with "+n.portal+".","NOT_FEDERATED")}var i,o,l,s;if(r.authInfo&&void 0!==n.federatedServers[a])return Promise.resolve({authInfo:r.authInfo});throw new C(e+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")})).then((function(e){return e.authInfo.tokenServicesUrl})).then((function(t){return n.token&&n.tokenExpires.getTime()>Date.now()?L(t,{params:{token:n.token,serverUrl:e,expiration:n.tokenDuration,client:"referer"}}):L(t,{params:{username:n.username,password:n.password,expiration:n.tokenDuration,client:"referer"}}).then((function(e){return n._token=e.token,n._tokenExpires=new Date(e.expires),e}))})).then((function(e){return n.federatedServers[a]={expires:new Date(e.expires),token:e.token},delete n._pendingTokenRequests[a],e.token}))}))),this._pendingTokenRequests[a])},e.prototype.getFreshToken=function(e){var t=this;return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshSession(e).then((function(e){return t._pendingTokenRequests[t.portal]=null,e.token}))),this._pendingTokenRequests[this.portal])},e.prototype.refreshWithUsernameAndPassword=function(e){var t=this,n=E({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},e);return L(this.portal+"/generateToken",n).then((function(e){return t._token=e.token,t._tokenExpires=new Date(e.expires),t}))},e.prototype.refreshWithRefreshToken=function(e){var t=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now())return this.refreshRefreshToken(e);var n=E({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return _(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t}))},e.prototype.refreshRefreshToken=function(e){var t=this,n=E({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return _(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t._refreshToken=e.refreshToken,t._refreshTokenExpires=new Date(Date.now()+60*(t.refreshTokenTTL-1)*1e3),t}))},e.prototype.fetchAuthorizedDomains=function(){var e=this;return this.server||!this.portal?Promise.resolve(this):this.getPortal().then((function(t){return t.authorizedCrossOriginDomains&&t.authorizedCrossOriginDomains.length&&(e.trustedDomains=t.authorizedCrossOriginDomains.filter((function(e){return!e.startsWith("http://")})).map((function(e){return e.startsWith("https://")?e:"https://"+e}))),e}))},e}(),F=function(){return F=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},F.apply(this,arguments)};function B(e,t,n){var a=R(R({params:{}},n),e);return a.params=t.reduce((function(t,n){return(e[n]||"boolean"==typeof e[n])&&(t[n]=e[n]),t}),a.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(e,t){return a[t]&&(e[t]=a[t]),e}),{})}function W(e){var t=B(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:F({where:"1=1",outFields:"*"},e.params)});return j(b(e.url)+"/query",t)}function G(e){return j(b(e.url)+"/updateFeatures",B(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:F({},e.params)}))}function q(e,t,n){switch(t||(t=M.INFO),n&&(n=`(${n})`),e=`[${(new Date).toLocaleString()}]: ${e} ${n}`,t){case M.INFO:console.log(e);break;case M.WRN:console.warn(e);break;case M.ERROR:console.error(e);break;default:console.log(e)}}(U=M||(M={})).INFO="Information",U.WRN="Warning",U.ERROR="Error";var V=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function l(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((a=a.apply(e,t||[])).next())}))};function Z(e){return V(this,void 0,void 0,(function*(){return H.fromCredential(e.credential)}))}function J(e,t,n){return V(this,void 0,void 0,(function*(){const a=yield Z(n);try{return(yield W({url:e,where:t,authentication:a,httpMethod:"POST",hideToken:!0})).features}catch(n){q(n,M.ERROR,"queryTableFeatures"),q(e,M.WRN,t)}}))}function K(e,t,n){return V(this,void 0,void 0,(function*(){const a=yield Z(n);return G({url:e,authentication:a,features:[{attributes:t}],rollbackOnFailure:!0})}))}function $(e,t,n){return V(this,void 0,void 0,(function*(){const a=yield Z(n);try{return j(b((r={url:e,features:t,authentication:a,rollbackOnFailure:!0}).url)+"/addFeatures",B(r,["features","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:F({},r.params)}))}catch(e){console.log(e)}var r}))}function Y(e,t,n){return V(this,void 0,void 0,(function*(){const a=yield Z(n);return j(b((r={url:e,objectIds:t,authentication:a,rollbackOnFailure:!0}).url)+"/deleteFeatures",B(r,["where","objectIds","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:F({},r.params)}));var r}))}o(6826);const X=e=>{if(e)return new Date(e).toLocaleString()};String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},Array.prototype.orderBy=function(e,t){return this.sort(((n,a)=>n[e]>a[e]?t?-1:1:n[e]<a[e]?t?1:-1:0))},Array.prototype.groupBy=function(e){return this.reduce((function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t}),{})};var Q=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function l(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((a=a.apply(e,t||[])).next())}))};function ee(e,t){return Q(this,void 0,void 0,(function*(){return console.log("get Lifeline called"),yield J(t.lifelines,e,t)}))}function te(e,t){return Q(this,void 0,void 0,(function*(){return console.log("get Components called"),yield J(t.components,e,t)}))}function ne(e,t){return Q(this,void 0,void 0,(function*(){return console.log("get Template called"),yield function(e,t,n){return V(this,void 0,void 0,(function*(){try{const a=yield Z(n);return W({url:e,where:t,authentication:a,hideToken:!0}).then((e=>e))}catch(e){q(e,M.ERROR,"queryTableFeatureSet")}}))}(t.templates,e,t)}))}function ae(t,n){(0,e.getAppStore)().dispatch({type:t,val:n})}function re(e,t){return Q(this,void 0,void 0,(function*(){if(!e||null==e||""===e||null==e)throw new Error(t)}))}var ie=o(131),oe=o.n(ie);const le=t=>{const n=window.SVG,{className:a}=t,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",a);return n?e.React.createElement(n,Object.assign({className:i,src:oe()},r)):e.React.createElement("svg",Object.assign({className:i},r))},se=({close:n,errors:a})=>e.React.createElement("div",{className:"jimu-widget widget-error-container"},e.React.createElement("style",null,"\n          .widget-error-container{\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            background-color: #ffc6cd;\n            border: 1px solid red;\n            box-shadow: 1px 1px 12px 4px #5d5c5c;\n            padding: 10px 20px;\n            border-radius: 0 10px 0 0;\n          }     \n          .close-button{\n             position: absolute;\n             top: 0;\n             right: 0;\n             color: red;\n             cursor: pointer;\n          }     \n        "),e.React.createElement(le,{className:"close-button","data-testid":"btnCloseError",size:30,onClick:()=>n(),style:{color:"red"},title:"Close"}),e.React.createElement(t.Label,{style:{color:"#a50000",fontSize:"20px"},check:!0,size:"lg"},a));var de=o(5339),ce=o.n(de);const ue=t=>{const n=window.SVG,{className:a}=t,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",a);return n?e.React.createElement(n,Object.assign({className:i,src:ce()},r)):e.React.createElement("svg",Object.assign({className:i},r))};var me=o(9216),fe=o.n(me);const pe=t=>{const n=window.SVG,{className:a}=t,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",a);return n?e.React.createElement(n,Object.assign({className:i,src:fe()},r)):e.React.createElement("svg",Object.assign({className:i},r))};var he=o(5648),ge=o.n(he);const ve=t=>{const n=window.SVG,{className:a}=t,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",a);return n?e.React.createElement(n,Object.assign({className:i,src:ge()},r)):e.React.createElement("svg",Object.assign({className:i},r))};var ye=o(4357),we=o.n(ye);const Ee=t=>{const n=window.SVG,{className:a}=t,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",a);return n?e.React.createElement(n,Object.assign({className:i,src:we()},r)):e.React.createElement("svg",Object.assign({className:i},r))},be=({items:e,item:a,deletable:r,setItem:i,deleteItem:o,menuWidth:l})=>{const s=n.default.useRef();return n.default.useEffect((()=>{e&&e.length>0&&i(a||e[0])}),[e]),n.default.createElement("div",{className:"clss-dropdown-container",style:{width:"100%"}},n.default.createElement("style",null,"\n                  .dropdown-item-container{\n                    height: 45px;\n                    border-bottom: 1px solid rgb(227, 227, 227);\n                    width: 100%;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                  }\n                  .dropdown-item-container:hover{\n                    background-color: rgb(227, 227, 227);\n                  }\n                  .jimu-dropdown-menu{\n                    width: 35%;\n                    max-height: 500px;\n                    overflow: auto;\n                  }\n                  .jimu-dropdown-menu .dropdown-item-container:last-child{\n                    border-bottom: none;\n                  }\n                  .modal-content .clss-dropdown-container button{\n                    width: 100%;\n                  }\n                  .clss-dropdown-container .jimu-dropdown{\n                    width: 100%;\n                  }\n                  .close-button{\n                    margin: 10px;\n                    color: gray;\n                  }\n\n                  .modal-content .clss-dropdown-container button span{\n                     line-height: 30px !important;\n                  }\n                 \n                  .dropdown-item-container label{\n                    width: 100%;\n                    height: 100%;\n                    display: flex;\n                    align-items: center;\n                    font-size: 1.2em;\n                    margin-left: 1em;\n                    cursor: pointer;\n                  }\n                 "),n.default.createElement(t.Dropdown,{activeIcon:"true",size:"lg"},n.default.createElement(t.DropdownButton,{className:"dropdownButton",ref:s,size:"lg",style:{textAlign:"left"}},(null==a?void 0:a.title)||(null==a?void 0:a.name)),n.default.createElement(t.DropdownMenu,{style:{width:l||"30%"}},null==e?void 0:e.map(((e,a)=>n.default.createElement("div",{id:(null==e?void 0:e.name)||(null==e?void 0:e.title),className:"dropdown-item-container"},n.default.createElement(t.Label,{check:!0,onClick:()=>(e=>{i(e),s&&s.current&&s.current.click()})(e)},(null==e?void 0:e.title)||(null==e?void 0:e.name)),"-None-"!==((null==e?void 0:e.title)||(null==e?void 0:e.name))&&r?n.default.createElement(Ee,{title:"Remove",className:"close-button",size:20,onClick:()=>(e=>{confirm("Remove "+(e.title||e.name))&&o(e)})(e)}):null))))))};var Oe=o(272),Ne=o.n(Oe);const Se=t=>{const n=window.SVG,{className:a}=t,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",a);return n?e.React.createElement(n,Object.assign({className:i,src:Ne()},r)):e.React.createElement("svg",Object.assign({className:i},r))};const xe=({config:e,organizations:a,selectedOrganization:i,setOrganization:o,vertical:l,toggleNewOrganizationModal:s})=>{const[d,c]=n.default.useState([]);return n.default.useEffect((()=>{a&&c([...a])}),[a]),n.default.createElement("div",{style:{display:l?"block":"flex",alignItems:"center"}},n.default.createElement(be,{items:d,item:i,deletable:!0,setItem:o,deleteItem:t=>{return n=void 0,a=void 0,o=function*(){const n=yield function(e,t){return Q(this,void 0,void 0,(function*(){const n=yield Y(t.organizations,[e.objectId],t);return n.deleteResults&&n.deleteResults.every((e=>e.success))?{data:!0}:{errors:JSON.stringify(n)}}))}(t,e);if(n.errors)return console.log(n.errors),void ae(r.CLSSActionKeys.SET_ERRORS,n.errors);console.log(`${t.title} deleted`),c([...d.filter((e=>e.id!==t.id))])},new((i=void 0)||(i=Promise))((function(e,t){function r(e){try{s(o.next(e))}catch(e){t(e)}}function l(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,l)}s((o=o.apply(n,a||[])).next())}));var n,a,i,o}}),s?l?n.default.createElement(t.Button,{"data-testid":"btnShowAddOrganization",className:" add-link",type:"link",style:{textAlign:"left"},onClick:()=>s(!0)},"Add New Organization"):n.default.createElement(Se,{className:"action-icon","data-testid":"btnAddNewOrganization",title:"Add New Organization",size:30,color:"gray",onClick:()=>s(!0)}):null)};const Te=({config:e,hazards:a,selectedHazard:i,setHazard:o,vertical:l,toggleNewHazardModal:s})=>{const[d,c]=n.default.useState([]);return n.default.useEffect((()=>{a&&c([...a])}),[a]),n.default.createElement("div",{style:{display:l?"block":"flex",alignItems:"center"}},n.default.createElement("style",null,"\n                     .action-icon {\n                        color: gray;\n                        cursor: pointer;\n                      }\n                    "),n.default.createElement(be,{items:d,item:i,deletable:!0,setItem:o,deleteItem:t=>{return n=void 0,a=void 0,o=function*(){const n=yield function(e,t){return Q(this,void 0,void 0,(function*(){const n=yield Y(t.hazards,[e.objectId],t);return n.deleteResults&&n.deleteResults.every((e=>e.success))?{data:!0}:{errors:JSON.stringify(n)}}))}(t,e);if(n.errors)return console.log(n.errors),void ae(r.CLSSActionKeys.SET_ERRORS,n.errors);console.log(`${t.title} deleted`),c([...d.filter((e=>e.id!==t.id))])},new((i=void 0)||(i=Promise))((function(e,t){function r(e){try{s(o.next(e))}catch(e){t(e)}}function l(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,l)}s((o=o.apply(n,a||[])).next())}));var n,a,i,o}}),l?n.default.createElement(t.Button,{"data-testid":"btnShowAddOrganization",className:" add-link",type:"link",style:{textAlign:"left"},onClick:()=>s(!0)},"Add New Hazard"):n.default.createElement(Se,{className:"action-icon","data-testid":"btnAddNewHazard",title:"Add New Hazard",size:30,color:"gray",onClick:()=>s(!0)}))},Re=e=>n.default.createElement(t.Modal,{isOpen:e.visible,centered:!0,className:"clss-modal"},n.default.createElement("style",null,"\n                        .clss-modal .modal-content{\n                          font-size: 1.3rem;\n                          display: flex;\n                          flex-direction: column\n                        }              \n                        .clss-modal .modal-title{\n                            font-size: 1.1em;\n                        }         \n                        .clss-modal input{\n                            padding-left: 0px;\n                        }                   \n                        .clss-modal .jimu-input span{\n                            height: 40px;\n                            font-size: .9em;\n                        }                         \n                        .clss-modal label{\n                            color: gray;\n                        }    \n                        .clss-modal .jimu-dropdown-button{\n                            font-size: 1em;\n                        }    \n                        .clss-modal .modal-item{\n                            margin: 10px 0;\n                        }   \n                        .clss-modal textarea{\n                            font-size: 0.8em;\n                        }  \n                        .clss-modal .spacer{\n                            width: 1em;\n                        }\n                    "),n.default.createElement(t.ModalHeader,{toggle:()=>e.toggleVisibility(!1)},e.title),n.default.createElement(t.ModalBody,null,e.children),e.hideFooter&&1==e.hideFooter?null:n.default.createElement(t.ModalFooter,null,n.default.createElement(t.Button,{onClick:()=>e.cancel?e.cancel():e.toggleVisibility(!1)},e.noButtonTitle||"Cancel"),n.default.createElement("div",{className:"spacer"}),n.default.createElement(t.Button,{"data-testid":"btnSave",disabled:e.disable,onClick:()=>e.save()},e.yesButtonTitle||"Save")),e.loading?n.default.createElement(a,null):null),Ie=({assessments:e,toggle:t,isVisible:a})=>n.default.createElement(Re,{title:"Assessments created with this template",toggleVisibility:t,visible:a,hideFooter:!0},n.default.createElement("div",null,n.default.createElement("style",null,"\n                     .assessment-list tr:nth-child(2n+2){\n                        background:#efefef;\n                     }       \n                     .assessment-list td{\n                         line-height: 50px;\n                     }     \n                    "),n.default.createElement("table",{className:"assessment-list",style:{width:"100%"}},null==e?void 0:e.map(((e,t)=>n.default.createElement("tr",null,n.default.createElement("td",null,t+1+") ",e.name,n.default.createElement("span",{style:{color:"gray",marginLeft:".2em"}},"   ("+e.date+")"))))))));const{useSelector:ke}=e.ReactRedux,Ae=({template:e,config:o,organizations:l,hazards:m,onActionComplete:f,selectedNewHazard:p,selectedNewOrganization:h,toggleHazardModalVisibility:g,toggleOrganizationModalVisibility:v})=>{const[y,w]=n.default.useState(!1),[E,b]=n.default.useState(!1),[O,N]=n.default.useState(""),[S,x]=n.default.useState(null),[T,R]=n.default.useState(null),[I,k]=n.default.useState(!1),[A,C]=n.default.useState(),[j,L]=n.default.useState([]),[_,z]=n.default.useState([]),[D,P]=n.default.useState(!1),U=ke((e=>e.clssState.user)),H=ke((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.templates}));n.default.useEffect((()=>{p&&x(p)}),[p]),n.default.useEffect((()=>{h&&R(h)}),[h]),n.default.useEffect((()=>{o&&function(e,t){return Q(this,void 0,void 0,(function*(){const n=yield J(e.assessments,`Template='${t}'`,e);return n&&0===n.length?{data:[]}:n&&n.length>0?{data:n.map((e=>({name:e.attributes.Name,date:X(Number(e.attributes.CreatedDate))})))}:{errors:"Request for assessment names failed."}}))}(o,null==e?void 0:e.name).then((e=>{e.data&&z(e.data)}))}),[e]),n.default.useEffect((()=>{if(e){const t=e.domains;L(t)}}),[e]),n.default.useEffect((()=>{if(e&&j&&j.length>0){const t=j.find((t=>t.name===(null==e?void 0:e.status.name)));try{C(t)}catch(e){console.log(e)}}}),[e,j]),n.default.useEffect((()=>{var t,n,a;if(U){if(null===(t=null==U?void 0:U.groups)||void 0===t?void 0:t.includes(i))return void k(!0);if((null===(n=null==U?void 0:U.groups)||void 0===n?void 0:n.includes(s))&&(null==e?void 0:e.name)!==c)return void k(!0);if((null===(a=null==U?void 0:U.groups)||void 0===a?void 0:a.includes(d))&&(null==e?void 0:e.name)!==c)return void k(!0)}k(!1)}),[e,U]),n.default.useEffect((()=>{e&&N(null==e?void 0:e.name)}),[e]);const F=()=>{return t=void 0,n=void 0,i=function*(){var t;if(H.filter((t=>t.id!=e.id)).some((e=>e.name.toLowerCase()===O.toLowerCase().trim())))return void ae(r.CLSSActionKeys.SET_ERRORS,`Template: ${O} already exists`);w(!0);const n=(()=>{if(S&&"-None-"!==S.title)return S})(),a=(()=>{if(T&&"-None-"!==T.title)return T})(),i=Object.assign(Object.assign({},e),{name:O,isSelected:e.isSelected,status:A,hazardId:n?n.id:null,hazardName:n?n.name:null,hazardType:n?null===(t=n.type)||void 0===t?void 0:t.code:null,organizationType:a?a.type:null,organizationName:a?a.name:null,organizationId:a?a.id:null}),l=yield function(e,t,n){return Q(this,void 0,void 0,(function*(){re(t,"Template not provided"),re(e.templates,u);const a={OBJECTID:t.objectId,OrganizationID:t.organizationId,HazardID:t.hazardId,OrganizationName:t.organizationName,OrganizationType:t.organizationType,HazardName:t.hazardName,HazardType:t.hazardType,Name:t.name,Editor:n,EditedDate:(new Date).getTime(),Status:t.status.code,IsSelected:t.isSelected?1:0},r=yield K(e.templates,a,e);return r.updateResults&&r.updateResults.every((e=>e.success))?{data:!0}:(q(JSON.stringify(r),M.ERROR,"updateTemplateOrganizationAndHazard"),{errors:"Error occurred while updating template."})}))}(o,i,U.userName);w(!1),l.errors?ae(r.CLSSActionKeys.SET_ERRORS,l.errors):(b(!1),f(!0))},new((a=void 0)||(a=Promise))((function(e,r){function o(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,a,i};return n.default.createElement("div",{className:"details-content-header",style:{backgroundColor:null==o?void 0:o.headerBackgroundColor}},n.default.createElement("style",null,"      \n                  .details-content-header{\n                    display: flex;                    \n                    flex-wrap: wrap;\n                  }            \n                  .editor-icon{                    \n                    color: #534c4c;\n                    cursor: pointer;\n                    margin: 10px;\n                  }\n                  .details-content-header .editor-icon: hover{\n                    opacity: .8\n                  }\n                  .details-content-header .save-cancel, \n                  .details-content-header .save-icon{\n                    position: absolute;\n                    right: 10px;\n                    top: 10px;\n                  }\n                  .details-content-header .data-dropdown, \n                  .details-content-header .data-input{\n                    width: 100%;\n                    display: flex;\n                    align-items: center;\n                  }\n                  .details-content-header .data-dropdown .jimu-dropdown{\n                      width: 300px;\n                  }\n                  .details-content-header .data-dropdown-menu{\n                    width: 300px;\n                  }\n                  .details-content-header .error{\n                    color: red;\n                    font-size: 15px;\n                  }\n                  .details-content-header .dropdown-item{\n                      font-size: 1.3em;\n                  }\n                  .details-content-header .organization{\n                    display: flex;\n                    flex-direction: column;\n                  }\n                  .details-content-header .end-widget{\n                      margin-bottom: 15px;\n                  }\n                  .details-content-header .data-input{\n                      width: 30.7%\n                  }\n                  .details-content-header .title.template{\n                    width: 142px;\n                  }\n\n                  .details-content-header td label,\n                  .details-content-header td input{ \n                    font-size: 1.5em;\n                  }\n                  .details-content-header td label{\n                    width: 165px;\n                  }\n                  .details-content-header td label.value{\n                      font-weight: bold;\n                      width: auto;\n                  }\n                  .details-content-header tr.td-under>td{\n                    padding-bottom: 1em;\n                  }\n                  .details-content-header .template-input input{\n                    padding-left: 10px;\n                    height: 40px;\n                    font-size: 16px;\n                  }\n                  .details-content-header .template-input span{\n                      height: 40px !important;\n                      width: 300px;\n                  }\n                  .action-icon {\n                    color: gray;\n                    cursor: pointer;\n                  }\n                "),n.default.createElement("table",{className:"template-detail-header-table",style:{marginRight:"10em"}},n.default.createElement("tr",{className:"td-under"},n.default.createElement("td",null," ",n.default.createElement(t.Label,{check:!0},"Template Name: ")),n.default.createElement("td",null,E?n.default.createElement(t.TextInput,{className:"template-input",onChange:e=>N(e.target.value),value:O}):n.default.createElement(t.Label,{"data-testid":"lblTemplateName",className:"value",check:!0},O," "))),n.default.createElement("tr",{className:"td-under"},n.default.createElement("td",null,n.default.createElement(t.Label,{className:"title",check:!0},"Organization: ")),n.default.createElement("td",null,E?n.default.createElement("div",{className:"data-dropdown"},n.default.createElement(xe,{config:o,organizations:l,selectedOrganization:T,setOrganization:R,toggleNewOrganizationModal:v,vertical:!1})):n.default.createElement(t.Label,{"data-testid":"txtOrganizationName",className:"value",check:!0},T?null==T?void 0:T.name:"-None-"))),n.default.createElement("tr",{className:"td-under"},n.default.createElement("td",null," ",n.default.createElement(t.Label,{className:"title",check:!0},"Hazard: ")),n.default.createElement("td",null,E?n.default.createElement("div",{className:"data-dropdown"},n.default.createElement(Te,{config:o,hazards:m,selectedHazard:S,setHazard:x,toggleNewHazardModal:g,vertical:!1})):n.default.createElement(t.Label,{className:"value",check:!0},S&&"-None-"!==(null==S?void 0:S.title)?S.title+` (${S.type})`:"-None-"))),n.default.createElement("tr",{className:"td-under"},n.default.createElement("td",null,n.default.createElement(t.Label,{className:"title",check:!0},"Status: ")),n.default.createElement("td",null,E?n.default.createElement("div",{className:"data-dropdown"},n.default.createElement(be,{items:j,item:A,menuWidth:"300px",deletable:!1,setItem:C})):n.default.createElement(t.Label,{className:"value",check:!0},null==A?void 0:A.name)))),n.default.createElement("table",{className:"template-detail-header-table"},n.default.createElement("tr",{className:"td-under"},n.default.createElement("td",null," ",n.default.createElement(t.Label,{check:!0},"Author: ")),n.default.createElement("td",null,n.default.createElement(t.Label,{"data-testid":"lblTemplateName",className:"value",check:!0},null==e?void 0:e.creator," "))),n.default.createElement("tr",{className:"td-under"},n.default.createElement("td",null,n.default.createElement(t.Label,{className:"title",check:!0},"Date Created: ")),n.default.createElement("td",null,n.default.createElement(t.Label,{"data-testid":"lblTemplateName",className:"value",check:!0},X(null==e?void 0:e.createdDate)," "))),n.default.createElement("tr",{className:"td-under"},n.default.createElement("td",null,n.default.createElement(t.Label,{className:"title",check:!0},"Last Updated: ")),n.default.createElement("td",null,n.default.createElement(t.Label,{"data-testid":"lblTemplateName",className:"value",check:!0},X(null==e?void 0:e.editedDate)," ",e.editor?" by "+e.editor:"-"))),n.default.createElement("tr",{className:"td-under"},n.default.createElement("td",null," ",n.default.createElement(t.Label,{className:"title",check:!0},"Assessments: ")),n.default.createElement("td",null,_&&_.length>0?n.default.createElement(t.Button,{onClick:()=>P(!0),style:{fontSize:"1.5em",padding:0,fontWeight:"bold"},type:"link"},"Click here to view the assessments (",null==_?void 0:_.length,")"):n.default.createElement(t.Label,{"data-testid":"lblTemplateName",className:"value",check:!0},"-None-")))),I&&E?n.default.createElement("div",{className:"save-cancel",style:{display:"flex",flexDirection:"column"}},n.default.createElement(ue,{"data-testid":"btnCancelEdits",size:25,className:"editor-icon",style:{color:"#534c4c",fontWeight:"bold"},title:"Cancel Edits",onClick:()=>(N(e.name),x(m.find((t=>t.name===e.hazardName))),R(l.find((t=>t.name===e.organizationName))),b(!1),void f(!1))}),n.default.createElement(ve,{size:25,"data-testid":"btnSaveEdits",className:"editor-icon",onClick:()=>F(),style:{color:"#534c4c",fontWeight:"bold"},title:"Save"})):I?n.default.createElement(pe,{"data-testid":"btnStartEditing",size:30,className:"editor-icon save-icon",onClick:()=>b(!0),style:{color:"#534c4c"},title:"Edit"}):null,!e||y?n.default.createElement(a,null):null,n.default.createElement(Ie,{isVisible:D,toggle:P,assessments:_}))};var Ce=o(7373),je=o.n(Ce);const Le=t=>{const n=window.SVG,{className:a}=t,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",a);return n?e.React.createElement(n,Object.assign({className:i,src:je()},r)):e.React.createElement("svg",Object.assign({className:i},r))};var _e=o(2304),ze=o.n(_e);const De=t=>{const n=window.SVG,{className:a}=t,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",a);return n?e.React.createElement(n,Object.assign({className:i,src:ze()},r)):e.React.createElement("svg",Object.assign({className:i},r))};var Pe=o(2957),Me=o.n(Pe);const Ue=t=>{const n=window.SVG,{className:a}=t,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",a);return n?e.React.createElement(n,Object.assign({className:i,src:Me()},r)):e.React.createElement("svg",Object.assign({className:i},r))},He=({error:e})=>n.default.createElement("h2",{style:{color:"red",fontSize:"15px"}},e);var Fe=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function l(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((a=a.apply(e,t||[])).next())}))};const{useSelector:Be}=e.ReactRedux,We=({isInEditMode:e,onEdit:t,onDelete:a,onSave:r,onCancel:i,canSave:o})=>n.default.createElement("td",{className:"data"},n.default.createElement("div",{className:"command-container"},n.default.createElement("style",null,"\n                        .command-container{\n                            display: flex;\n                            justify-content: space-between;\n                            align-items: center;\n                        }\n                        .command{\n                            flex: 1\n                        }\n                        .edit-delete, .save-cancel{\n                            display: flex;\n                            align-items: center;\n                            flex-wrap: nowrap;\n                        }\n                        "),e?n.default.createElement("div",{className:"edit-delete"},n.default.createElement(Ue,{style:{pointerEvents:o?"all":"none"},size:20,className:"command",title:"Save Edits",onClick:()=>r()}),n.default.createElement(ue,{size:20,className:"command",title:"Cancel Edits",onClick:()=>i()})):n.default.createElement("div",{className:"edit-delete"},n.default.createElement(Le,{size:20,className:"command",title:"Edit",onClick:()=>t()}),n.default.createElement(Ee,{size:20,className:"command",title:"Delete",onClick:()=>a()})))),Ge=({indicator:e,isEditable:i,component:o,template:l,config:s,setError:d,onActionComplete:c,onCancel:u})=>{const[y,w]=n.default.useState(e.isBeingEdited),[E,b]=n.default.useState(!1),[O,N]=n.default.useState(""),[S,x]=n.default.useState(),[T,R]=n.default.useState(),[I,k]=n.default.useState(),[A,C]=n.default.useState(),[j,L]=n.default.useState(),[_,z]=n.default.useState(!0);n.default.useEffect((()=>{var t,n,a,r,i;if(e)try{N(null==e?void 0:e.name),x(null===(t=null==e?void 0:e.weights)||void 0===t?void 0:t.find((e=>e.name===f)).weight),R(null===(n=null==e?void 0:e.weights)||void 0===n?void 0:n.find((e=>e.name===p)).weight),k(null===(a=null==e?void 0:e.weights)||void 0===a?void 0:a.find((e=>e.name===h)).weight),C(null===(r=null==e?void 0:e.weights)||void 0===r?void 0:r.find((e=>e.name===g)).weight),L(null===(i=null==e?void 0:e.weights)||void 0===i?void 0:i.find((e=>e.name===v)).weight)}catch(e){}}),[e]),n.default.useEffect((()=>{if(z(!0),d(""),O){const t=o.indicators.map((e=>e.name.toLocaleLowerCase()));if(e.isNew&&t.includes(O.toLocaleLowerCase()))return d(`Indicator: ${O} already exists`),void z(!1)}}),[O]);const D=e=>{switch(e.name){case f:return S;case p:return T;case h:return I;case g:return A;case v:return j}};return n.default.createElement("tr",{style:{position:"relative"}},n.default.createElement("style",null,"\n                    .lifeline-component-table .indicator-name input {\n                        font-size: 12px !important\n                     }   \n                     .jimu-numeric-input input{\n                        min-width: 160px;\n                     }                  \n                    "),n.default.createElement("td",{className:"data indicator-name",style:{textAlign:"left"}},y?n.default.createElement("label",{style:{width:"100%"}},n.default.createElement(t.TextInput,{className:"indicator-name",title:O,value:O,onChange:e=>N(e.target.value),allowClear:!0,type:"text"})):O),n.default.createElement("td",{className:"data"},y?n.default.createElement("label",null,n.default.createElement(t.NumericInput,{max:5,min:1,onChange:e=>x(e),value:S})):S),n.default.createElement("td",{className:"data"},"N/A"),n.default.createElement("td",{className:"data"},"N/A"),n.default.createElement("td",{className:"data"},"N/A"),n.default.createElement("td",{className:"data"},"N/A"),i?n.default.createElement("td",{className:"data"},n.default.createElement(We,{isInEditMode:y,canSave:_,onEdit:()=>w(!0),onSave:()=>Fe(void 0,void 0,void 0,(function*(){b(!0);const t=Object.assign(Object.assign({},e),{name:O,title:O,weights:null==e?void 0:e.weights.map((e=>Object.assign(Object.assign({},e),{weight:D(e)})))});if(e.isNew){const e=yield function(e,t,n,a){return Q(this,void 0,void 0,(function*(){re(t.indicators,m);const r={attributes:{TemplateID:n,ComponentID:e.componentId,ComponentName:e.componentName,Name:e.name,TemplateName:a,LifelineName:e.lifelineName}};let i=yield $(t.indicators,[r],t);if(i.addResults&&i.addResults.every((e=>e.success))){const n=e.weights.map((e=>({attributes:{IndicatorID:i.addResults[0].globalId,Name:e.name,Weight:e.weight,ScaleFactor:0,AdjustedWeight:0,MaxAdjustedWeight:0}})));if(i=yield $(t.weights,n,t),i.addResults&&i.addResults.every((e=>e.success)))return{data:!0}}return q(JSON.stringify(i),M.ERROR,"createNewIndicator"),{errors:"Error occurred while saving the indicator."}}))}(t,s,l.id,l.name);if(e.errors)return b(!1),void ae(r.CLSSActionKeys.SET_ERRORS,e.errors)}else{const e=yield function(e,t){return Q(this,void 0,void 0,(function*(){re(t.indicators,"Incident FeatureLayer URL not provided");let n=yield J(t.indicators,`Name='${e.name}' AND TemplateName='${e.templateName}'`,t);if(n&&n.length>1)return{errors:"An indicator with the same name already exists"};const a=yield function(e,t){return Q(this,void 0,void 0,(function*(){re(e.indicators,m);const n={OBJECTID:t.objectId,Name:t.name,DisplayTitle:t.name,IsActive:1},a=yield K(e.indicators,n,e);return a.updateResults&&a.updateResults.every((e=>e.success))?{data:!0}:(q(JSON.stringify(a),M.ERROR,"updateIndicatorName"),{errors:"Error occurred while updating indicator"})}))}(t,e);if(a.errors)return{errors:a.errors};n=e.weights.map((e=>({attributes:{OBJECTID:e.objectId,Weight:Number(e.weight),AdjustedWeight:Number(e.weight)*e.scaleFactor}})));const r=yield function(e,t,n){return V(this,void 0,void 0,(function*(){const a=yield Z(n);return G({url:e,authentication:a,features:t})}))}(t.weights,n,t);return r.updateResults&&r.updateResults.every((e=>e.success))?{data:!0}:(q(JSON.stringify(r),M.ERROR,"updateIndicator"),{errors:"Error occurred while updating indicator."})}))}(t,s);if(e.errors)return b(!1),void ae(r.CLSSActionKeys.SET_ERRORS,e.errors)}w(!1),b(!1),c(!0)})),onCancel:()=>{d(""),z(!0),w(!1),c(!1),e.isNew&&u()},onDelete:()=>Fe(void 0,void 0,void 0,(function*(){if(1==confirm("Are you sure you want to delete indicator?")){b(!0);const t=yield function(e,t){return Q(this,void 0,void 0,(function*(){re(t.indicators,m),re(t.weights,"Weights URL not provided");let n=yield Y(t.indicators,[e.objectId],t);if(n.deleteResults&&n.deleteResults.every((e=>e.success))){const a=e.weights.map((e=>e.objectId));if(n=yield Y(t.weights,a,t),n.deleteResults&&n.deleteResults.every((e=>e.success)))return{data:!0}}return q(JSON.stringify(n),M.ERROR,"deleteIndicator"),{errors:"Error occurred while deleting the indicator"}}))}(e,s);if(t.errors)return void ae(r.CLSSActionKeys.SET_ERRORS,t.errors);b(!1),c(!0)}}))})):null,E?n.default.createElement(a,null):null)},qe=({lifeline:e,component:a,template:r,config:o,onActionComplete:l})=>{const[u,m]=n.default.useState([]),[w,E]=n.default.useState(""),[b,O]=n.default.useState(!1),N=Be((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.user}));n.default.useEffect((()=>{var e,t,n;if(N){if(null===(e=null==N?void 0:N.groups)||void 0===e?void 0:e.includes(i))return void O(!0);if((null===(t=null==N?void 0:N.groups)||void 0===t?void 0:t.includes(s))&&(null==r?void 0:r.name)!==c)return void O(!0);if((null===(n=null==N?void 0:N.groups)||void 0===n?void 0:n.includes(d))&&(null==r?void 0:r.name)!==c)return void O(!0)}O(!1)}),[r,N]),n.default.useEffect((()=>{m(a.indicators.orderBy("name"))}),[a]);const S=()=>{m(u.filter((e=>!e.isNew)))};return n.default.createElement("div",{className:"lifeline-component-container",style:{marginTop:b?"0.5em":"1.8em"}},n.default.createElement("style",null,"\n               .lifeline-component-container{\n                  display: flex;\n                  flex-direction: column;\n                  width: 100%;\n                  margin-bottom: 0.5em;\n               } \n               .component-label{\n                font-size: 18px;\n                color: #534c4c;\n                font-weight: bold;\n                padding: 0 0 0 1.2em;\n                text-decoration: underline;\n               }                     \n               .component-details{\n                 background-color: white;\n                 width: 100%;\n                 padding: 15px 0 0 0;\n               }\n               .lifeline-component-table{\n                width: 100%;\n               }    \n               .lifeline-component-table .table-header-data{\n                 display: flex;\n                 width: 10em;\n                 align-items: center;\n                 flex-wrap:nowrap;\n                 justify-content: center;\n               } \n               .lifeline-component-table .table-header-data svg{\n                 width: 40px;\n               }         \n               .lifeline-component-table .command{\n                color: gray;\n                cursor: pointer;\n                width: 40px !important;\n              }\n              .lifeline-component-table td.data{\n                font-size: 13px;               \n                color: #534c4c;\n                text-align: center;\n                border-right: 1px solid white\n              }\n              .lifeline-component-table .tableBody td{\n                color: #534c4c;\n                text-align: center;\n                font-size: 0.8rem;\n                padding: .8em;\n                font-weight: bold;\n              }\n              .lifeline-component-table .tableBody tr:nth-child(odd){\n                background-color: #f0f0f0;\n              }\n              .add-new{\n                text-align: right;\n                margin: 10px 5px 0 0;\n                font-weight: bold;\n              }\n              .add-new button{\n                 font-weight: normal;\n                 padding: 0.5em;\n              }\n              .table-header-data h6{\n                margin: 0;\n              }\n            "),n.default.createElement(t.Label,{check:!0,className:"component-label"},a.title),n.default.createElement("div",{className:"component-details"},n.default.createElement("table",{className:"lifeline-component-table table"},n.default.createElement("thead",{style:{backgroundColor:"#c5c5c5"}},n.default.createElement("tr",null,n.default.createElement("td",{className:"data",style:{width:"400px"}},n.default.createElement("h6",null,"Indicator")),n.default.createElement("td",{className:"data"},n.default.createElement("div",{className:"table-header-data"},n.default.createElement("h6",null,"Rank"),n.default.createElement(De,{size:20,title:"How important is the indicator to your jurisdiction or hazard?(1=Most Important, 5=Least Important)"}))),n.default.createElement("td",{className:"data"},n.default.createElement("div",{className:"table-header-data"},n.default.createElement("h6",null,"Life Safety"),n.default.createElement(De,{size:20,title:"How important is the indicator to Life Safety?"}))),n.default.createElement("td",{className:"data"},n.default.createElement("div",{className:"table-header-data"},n.default.createElement("h6",null,"Incident Stabilization"),n.default.createElement(De,{size:20,title:"How important is the indicator to Incident Stabilization?"}))),n.default.createElement("td",{className:"data"},n.default.createElement("div",{className:"table-header-data"},n.default.createElement("h6",null,"Property Protection"),n.default.createElement(De,{size:20,title:"How important is the indicator to Property Protection?"}))),n.default.createElement("td",{className:"data"},n.default.createElement("div",{className:"table-header-data"},n.default.createElement("h6",null,"Environmental Preservation"),n.default.createElement(De,{size:20,title:"How important is the indicator to Environmental Preservation?"}))),n.default.createElement("td",{className:"data"}))),n.default.createElement("tbody",{className:"tableBody"},u.map((e=>n.default.createElement(Ge,{key:e.id,indicator:e,isEditable:b,component:a,config:o,template:r,setError:E,onCancel:S,onActionComplete:l})))),b?n.default.createElement("tfoot",null,n.default.createElement("tr",null,n.default.createElement("td",{colSpan:8},n.default.createElement("div",{className:"add-new"},n.default.createElement(t.Button,{disabled:null==u?void 0:u.some((e=>e.isNew)),onClick:()=>Fe(void 0,void 0,void 0,(function*(){const t=[{name:f,adjustedWeight:0,indicatorId:"",scaleFactor:y,weight:1},{name:p,adjustedWeight:0,indicatorId:"",scaleFactor:200,weight:1},{name:g,adjustedWeight:0,indicatorId:"",scaleFactor:y,weight:1},{name:h,adjustedWeight:0,indicatorId:"",scaleFactor:y,weight:1},{name:v,adjustedWeight:0,indicatorId:"",scaleFactor:y,weight:1}],n=u||[],i={name:"",isBeingEdited:!0,isNew:!0,templateName:r.name,weights:t,componentId:a.id,templateId:r.id,componentName:a.name,lifelineName:e.name};m([...n,i])})),title:"Add new indicator",size:"default"},n.default.createElement(t.Icon,{icon:'<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5Z" fill="#000"></path></svg>',size:"m"}),"Add New Indicator"))))):null),w?n.default.createElement(He,{error:w}):null))};const{useSelector:Ve}=e.ReactRedux,Ze=({propsConfig:e,visible:a,toggle:i,setOrganization:o})=>{const[l,s]=n.default.useState(!1),[d,c]=n.default.useState(!1),[u,m]=n.default.useState(""),[f,p]=n.default.useState([]),[h,g]=n.default.useState(null),[v,y]=n.default.useState(null),[w,E]=n.default.useState(null),b=Ve((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.organizations})),O=Ve((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.authenticate}));return n.default.useEffect((()=>{c(a),m(""),g(null)}),[a]),n.default.useEffect((()=>{O&&E(Object.assign(Object.assign({},e),{credential:O}))}),[O]),n.default.useEffect((()=>{if(b&&b.length>0){const e=b[1].domains;null==e||e.orderBy("name"),p(e)}}),[b]),n.default.useEffect((()=>{y(b[0])}),[b]),n.default.createElement(Re,{title:"Add New Organization",disable:!(u&&h),save:()=>{return e=void 0,t=void 0,a=function*(){if(b.find((e=>e.name===u)))ae(r.CLSSActionKeys.SET_ERRORS,`Organization: ${u} already exists`);else{s(!0);try{let e={name:u,title:u,type:h,parentId:"000"!==v.id?v.id:null};const t=yield function(e,t){var n;return Q(this,void 0,void 0,(function*(){re(e.organizations,"Organization FeatureLayer URL not provided"),re(t,"Organization object not provided");const a={attributes:{Name:t.name,Type:null===(n=t.type)||void 0===n?void 0:n.code,DisplayTitle:t.name,ParentID:null==t?void 0:t.parentId}},r=yield $(e.organizations,[a],e);return r.addResults&&r.addResults.every((e=>e.success))?{data:Object.assign({},t)}:{errors:JSON.stringify(r)}}))}(w,e);if(console.log(t),t.errors)throw new Error(String(t.errors));e=t.data,e.domains=b[1].domains,ae(r.CLSSActionKeys.LOAD_ORGANIZATIONS_ACTION,[...b,e]),o(t.data),i(!1)}catch(e){console.log(e),ae(r.CLSSActionKeys.SET_ERRORS,e.message)}finally{s(!1)}}},new((n=void 0)||(n=Promise))((function(r,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function l(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((a=a.apply(e,t||[])).next())}));var e,t,n,a},loading:l,toggleVisibility:i,visible:d},n.default.createElement("div",{className:"add-organization"},n.default.createElement("style",null,"\n                        .add-organization{\n                           display: flex;\n                           flex-direction: column\n                         }                         \n                     "),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Organization Name",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(t.TextInput,{"data-testid":"txtOrganizationName",size:"default",onChange:e=>m(e.target.value),value:u})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Organization Type",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(be,{items:f,item:h,deletable:!1,setItem:g})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Organization's Parent (Optional)"),n.default.createElement(xe,{config:w,toggleNewOrganizationModal:null,organizations:b,selectedOrganization:v,setOrganization:y,vertical:!1}))))};const{useSelector:Je}=e.ReactRedux,Ke=({props:e,visible:a,toggle:i,setHazard:o})=>{const[l,s]=n.default.useState(!1),[d,c]=n.default.useState(!1),[u,m]=n.default.useState(""),[f,p]=n.default.useState(""),[h,g]=n.default.useState([]),[v,y]=n.default.useState(null),[w,E]=n.default.useState(null),b=Je((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.authenticate})),O=Je((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.hazards}));return n.default.useEffect((()=>{b&&E(Object.assign(Object.assign({},e.config),{credential:b}))}),[b]),n.default.useEffect((()=>{if(O&&O.length>0){const e=O[1].domains;e.orderBy("name"),g(e)}}),[O]),n.default.useEffect((()=>{c(a),m(""),p(""),y(null)}),[a]),n.default.createElement(Re,{title:"Add New Hazard",disable:!(u&&v),save:()=>{return e=void 0,t=void 0,a=function*(){if(O.find((e=>e.name.toLowerCase()===u.toLowerCase().trim())))ae(r.CLSSActionKeys.SET_ERRORS,`Hazard: ${u} already exists`);else{s(!0);try{let e={name:u,title:u,type:v,description:f};const t=yield function(e,t){return Q(this,void 0,void 0,(function*(){const n={attributes:{Name:t.name,DisplayTitle:t.name,Type:t.type.code,Description:t.description}},a=yield $(e.hazards,[n],e);return a.addResults&&a.addResults.every((e=>e.success))?{data:Object.assign(Object.assign({},t),{objectId:a.addResults[0].objectId,id:a.addResults[0].globalId})}:(q("Error occurred while saving hazard. Restarting the application may fix this issue.",M.ERROR,"saveHazard"),{errors:"Error occurred while saving hazard. Restarting the application may fix this issue."})}))}(w,e);if(console.log(t),t.errors)throw new Error(String(t.errors));e=t.data,e.domains=O[1].domains,ae(r.CLSSActionKeys.LOAD_HAZARDS_ACTION,[...O,e]),o(e),i(!1)}catch(e){console.log(e),ae(r.CLSSActionKeys.SET_ERRORS,e.message)}finally{s(!1)}}},new((n=void 0)||(n=Promise))((function(r,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function l(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((a=a.apply(e,t||[])).next())}));var e,t,n,a},toggleVisibility:i,visible:d,loading:l},n.default.createElement("div",{className:"hazards"},n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Hazard Name",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(t.TextInput,{onChange:e=>m(e.target.value),value:u})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Hazard Type",n.default.createElement("span",{style:{color:"red"}},"*")),n.default.createElement(be,{items:h,item:v,deletable:!1,setItem:y})),n.default.createElement("div",{className:"modal-item"},n.default.createElement(t.Label,{check:!0},"Description of Hazard (Optional)"),n.default.createElement(t.TextArea,{value:f,onChange:e=>p(e.target.value)}))))},$e=({message:e})=>n.default.createElement("div",{style:{height:"100%",width:"100%",position:"absolute",background:"rgb(0 0 0 / 13%)",top:0,left:0,zIndex:999999,display:"flex",justifyContent:"center",alignItems:"center"}},n.default.createElement("h3",null,e));var Ye=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function l(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((a=a.apply(e,t||[])).next())}))};const{useSelector:Xe}=e.ReactRedux,Qe=n=>{const[i,o]=e.React.useState(!1),[l,s]=e.React.useState(null),[d,m]=e.React.useState(!1),[f,p]=e.React.useState(!1),[h,g]=e.React.useState(null),[v,y]=e.React.useState(null),w=Xe((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.errors})),E=Xe((e=>{var t;return null===(t=null==e?void 0:e.clssState)||void 0===t?void 0:t.templates.find((e=>e.isSelected))})),b=Xe((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.authenticate})),O=Xe((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.hazards})),N=Xe((e=>{var t;return null===(t=e.clssState)||void 0===t?void 0:t.organizations}));e.React.useEffect((()=>{b&&s(Object.assign(Object.assign({},n.config),{credential:b}))}),[b]),e.React.useEffect((()=>{E&&N&&N.length>0&&y(N.find((e=>e.name===E.organizationName)))}),[E,N]),e.React.useEffect((()=>{E&&O&&O.length>0&&g(O.find((e=>e.name===E.hazardName)))}),[E,O]);const S=e=>Ye(void 0,void 0,void 0,(function*(){e&&(yield Ye(void 0,void 0,void 0,(function*(){const e=E?Object.assign({},E):null,t=yield function(e,t,n){return Q(this,void 0,void 0,(function*(){const a=e.templates,r=e.lifelines,i=e.components;try{re(a,u),re(r,"Lifeline FeatureLayer URL not provided"),re(i,"Component FeatureLayer URL not provided");const o=t?`GlobalID='${t}`:n||"1=1",l=yield Promise.all([ne(o,e),ee("1=1",e),te("1=1",e)]),s=l[0],d=l[1],m=l[2],f=yield function(e,t){return Q(this,void 0,void 0,(function*(){return console.log("get Indicators called"),yield J(t.indicators,"1=1",t)}))}(0,e),p=yield function(e,t){return Q(this,void 0,void 0,(function*(){return console.log("get Weights called"),yield J(t.weights,"1=1",t)}))}(0,e),h=yield Promise.all(s.features.map((e=>Q(this,void 0,void 0,(function*(){const t=f.filter((t=>t.attributes.TemplateID==e.attributes.GlobalID));return yield function(e,t,n,a,r,i){return Q(this,void 0,void 0,(function*(){const o=a.filter((t=>t.attributes.TemplateID=`'${e.attributes.GlobalID}'`)),l=o.map((e=>e.attributes.GlobalID)),s=(r.filter((e=>l.indexOf(e.attributes.IndicatorID))),o.map((e=>{const t=r.filter((t=>t.attributes.IndicatorID===e.attributes.GlobalID)).map((e=>({objectId:e.attributes.OBJECTID,name:e.attributes.Name,weight:e.attributes.Weight,scaleFactor:e.attributes.ScaleFactor,adjustedWeight:e.attributes.AdjustedWeight,maxAdjustedWeight:e.attributes.MaxAdjustedWeight})));return{objectId:e.attributes.OBJECTID,id:e.attributes.GlobalID,name:e.attributes.Name,templateName:e.attributes.TemplateName,weights:t,componentId:e.attributes.ComponentID,templateId:e.attributes.TemplateID,componentName:e.attributes.ComponentName,lifelineName:e.attributes.LifelineName}}))),d=n.map((e=>({id:e.attributes.GlobalID,title:e.attributes.DisplayName||e.attributes.DisplayTitle,name:e.attributes.Name,lifelineId:e.attributes.LifelineID,indicators:s.filter((t=>t.componentId===e.attributes.GlobalID)).orderBy("name")}))),c=t.map((e=>({id:e.attributes.GlobalID,title:e.attributes.DisplayName||e.attributes.DisplayTitle,name:e.attributes.Name,componentTemplates:d.filter((t=>t.lifelineId===e.attributes.GlobalID)).orderBy("title")})));return{objectId:e.attributes.OBJECTID,id:e.attributes.GlobalID,isSelected:1==e.attributes.IsSelected,status:{code:e.attributes.Status,name:1===e.attributes.Status?"Active":"Archived"},name:e.attributes.Name,hazardName:e.attributes.HazardName,hazardType:e.attributes.HazardType,organizationName:e.attributes.OrganizationName,organizationType:e.attributes.OrganizationType,creator:e.attributes.Creator,createdDate:Number(e.attributes.CreatedDate),editor:e.attributes.Editor,editedDate:Number(e.attributes.EditedDate),lifelineTemplates:c.orderBy("title"),domains:i}}))}(e,d,m,t,p,s.fields.find((e=>"Status"===e.name)).domain.codedValues)})))));return h.filter((e=>e.isSelected)).length>1||0==h.filter((e=>e.isSelected)).length?{data:h.map((e=>Object.assign(Object.assign({},e),{isSelected:e.name===c})))}:1===h.length?{data:h.map((e=>Object.assign(Object.assign({},e),{isSelected:!0})))}:{data:h}}catch(e){return q(e,M.ERROR,"getTemplates"),{errors:"Templates request failed."}}}))}(l);let n=t.data;return t.data&&(e&&(n=t.data.map((t=>Object.assign(Object.assign({},t),{isSelected:t.id===e.id})))),ae(r.CLSSActionKeys.LOAD_TEMPLATES_ACTION,n)),t})))}));return i?e.React.createElement(a,null):null==E?e.React.createElement($e,{message:"Select a template to view details"}):e.React.createElement("div",{className:"widget-template-detail",style:{backgroundColor:n.config.backgoundColor}},e.React.createElement("style",null,"\n          .widget-template-detail {\n            width: 100%;\n            height: 100%;\n            padding: 20px;\n            overflow: auto;\n            position: relative;            \n          }\n\n          .error-panel {\n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 100%;\n            z-index: 999\n          }\n          \n          .details-content{\n            width: 100%;\n            height: 100%; \n            display: flex;\n            flex-direction: column;\n            align-items: center;   \n          }\n         \n          .details-content-header{\n            border-radius: 10px 10px 0 0;\n            padding: 30px 50px;\n            width: 100%;\n            position:relative;              \n            margin-bottom: 10px;\n          }\n          \n          .header-row{\n            display: flex;   \n            margin-bottom: 10px;           \n          }\n          .header-row label{\n            font-size: 1.6em;\n            color: #4d4949;\n          }\n          .header-row .value{\n            font-weight: bold;\n          }\n          .header-row .title{\n             width: 165px;\n          }\n          .details-content-data{\n            height: 100%;\n            margin-top: 20px;\n            padding: 0;\n          }\n          .details-content-data-header{             \n            height: 75px;\n            width: 100%;\n            background: #534c4c80;\n            border-radius: 10px 10px 0 0;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            padding: 0 10px;\n            text-align: center;\n          }\n          .details-content-data-header label{\n            font-size: 1.6em;\n            color: white;\n          }\n          .lifelines-tabs{\n            width: 100%;             \n          }\n          .lifelines-tabs .tab-title{\n            font-size: 15px;\n            font-weight: bold;\n            padding: 10px;\n          }\n          .lifelines-tabs .nav-item{\n            height: 40px;\n          }\n          .lifeline-tab-content{\n            padding: 10px;\n            background-color: white;\n          }\n        "),e.React.createElement("div",{className:"details-content"},w&&!i?e.React.createElement("div",{className:"error-panel"},e.React.createElement(se,{close:()=>{(0,e.getAppStore)().dispatch({type:r.CLSSActionKeys.SET_ERRORS,val:""})},errors:w})):null,e.React.createElement(Ae,{template:E,organizations:N,hazards:O,onActionComplete:S,config:l,selectedNewHazard:h,selectedNewOrganization:v,toggleHazardModalVisibility:p,toggleOrganizationModalVisibility:m}),e.React.createElement("div",{className:"lifelines-tabs"},e.React.createElement(t.Tabs,{defaultValue:"tab-1",fill:!0,type:"tabs"},null==E?void 0:E.lifelineTemplates.map((n=>{var a;return e.React.createElement(t.Tab,{id:null==n?void 0:n.id,key:null==n?void 0:n.id,title:n.title},e.React.createElement("div",{className:"lifeline-tab-content"},null===(a=null==n?void 0:n.componentTemplates)||void 0===a?void 0:a.map((t=>e.React.createElement(qe,{key:t.id,lifeline:n,component:t,template:E,config:l,onActionComplete:S})))))}))))),e.React.createElement(Ze,{propsConfig:null==n?void 0:n.config,visible:d,setOrganization:y,toggle:m}),e.React.createElement(Ke,{props:n,visible:f,setHazard:g,toggle:p}))}})(),l})())}}}));